

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>11. Add LDAP Support &mdash; Open OnDemand 0.0.1 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="author" title="About these documents"
              href="../about.html"/>
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Open OnDemand 0.0.1 documentation" href="../index.html"/>
        <link rel="up" title="Installation" href="../installation.html"/>
        <link rel="next" title="Install Desktops" href="../install-desktops.html"/>
        <link rel="prev" title="10. Add SSL Support" href="add-ssl.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Open OnDemand
          

          
          </a>

          
            
            
              <div class="version">
                0.0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../about.html">What is Open OnDemand</a></li>
</ul>
<p class="caption"><span class="caption-text">Getting Started</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../installation.html">Installation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="software-requirements.html">1. Software Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="modify-system-security.html">2. Modify System Security</a></li>
<li class="toctree-l2"><a class="reference internal" href="generate-apache-config.html">3. Generate Apache Config</a></li>
<li class="toctree-l2"><a class="reference internal" href="install-proxy-module.html">4. Install Proxy Module for Apache</a></li>
<li class="toctree-l2"><a class="reference internal" href="install-pun-utility.html">5. Install the PUN Utility</a></li>
<li class="toctree-l2"><a class="reference internal" href="install-mapping-script.html">6. Install User Mapping Script</a></li>
<li class="toctree-l2"><a class="reference internal" href="add-cluster-config.html">7. Add Cluster Configuration Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="start-apache.html">8. Start Apache</a></li>
<li class="toctree-l2"><a class="reference internal" href="install-apps.html">9. Install Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="add-ssl.html">10. Add SSL Support</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">11. Add LDAP Support</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../install-desktops.html">Install Desktops</a></li>
</ul>
<p class="caption"><span class="caption-text">Components</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../infrastructure.html">Infrastructure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../applications.html">Applications</a></li>
</ul>
<p class="caption"><span class="caption-text">Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user-documentation.html">User Documentation</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Open OnDemand</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../installation.html">Installation</a> &raquo;</li>
        
      <li>11. Add LDAP Support</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/installation/add-ldap.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="add-ldap-support">
<span id="add-ldap"></span><h1>11. Add LDAP Support<a class="headerlink" href="#add-ldap-support" title="Permalink to this headline">Â¶</a></h1>
<p><strong>(Optional, but recommended)</strong></p>
<p>LDAP support allows for your users to log in using their local username and
password. It also removes the need for the sys admin to keep updating the
<code class="docutils literal"><span class="pre">.htpasswd</span></code> file.</p>
<p>Requirements:</p>
<ul class="simple">
<li>an LDAP server preferably with SSL support (<code class="docutils literal"><span class="pre">openldap1.infra.osc.edu:636</span></code>)</li>
</ul>
<ol class="arabic">
<li><p class="first">Install the necessary Apache module to use LDAP:</p>
<div class="highlight-sh"><div class="highlight"><pre><span></span>sudo yum install httpd24-mod_ldap.x86_64
</pre></div>
</div>
</li>
<li><p class="first">Update the Apache config with LDAP Basic Authentication support. This
requires modifying the configuration file for the
<a class="reference internal" href="../infrastructure/ood-portal-generator.html#ood-portal-generator"><span class="std std-ref">ood-portal-generator</span></a>.</p>
<div class="highlight-sh"><div class="highlight"><pre><span></span><span class="nb">cd</span> ~/ood/src/ood-portal-generator
</pre></div>
</div>
</li>
<li><p class="first"><a class="reference internal" href="../infrastructure/ood-portal-generator/configuration.html#ood-portal-generator-configuration"><span class="std std-ref">Configuration</span></a> is handled by editing the
<code class="docutils literal"><span class="pre">config.yml</span></code> as such:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="nn">---</span>

<span class="l l-Scalar l-Scalar-Plain">auth</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;AuthType</span><span class="nv"> </span><span class="s">Basic&#39;</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;AuthName</span><span class="nv"> </span><span class="s">&quot;private&quot;&#39;</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;AuthBasicProvider</span><span class="nv"> </span><span class="s">ldap&#39;</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;AuthLDAPURL</span><span class="nv"> </span><span class="s">&quot;ldaps://openldap1.infra.osc.edu:636/ou=People,ou=hpc,o=osc?uid&quot;</span><span class="nv"> </span><span class="s">SSL&#39;</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;AuthLDAPGroupAttribute</span><span class="nv"> </span><span class="s">memberUid&#39;</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;AuthLDAPGroupAttributeIsDN</span><span class="nv"> </span><span class="s">off&#39;</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;RequestHeader</span><span class="nv"> </span><span class="s">unset</span><span class="nv"> </span><span class="s">Authorization&#39;</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;Require</span><span class="nv"> </span><span class="s">valid-user&#39;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For documentation on LDAP directives please see:
<a class="reference external" href="https://httpd.apache.org/docs/2.4/mod/mod_authnz_ldap.html">https://httpd.apache.org/docs/2.4/mod/mod_authnz_ldap.html</a></p>
</div>
</li>
<li><p class="first">Re-build the Apache config:</p>
<div class="highlight-sh"><div class="highlight"><pre><span></span>scl <span class="nb">enable</span> rh-ruby22 -- rake
</pre></div>
</div>
</li>
<li><p class="first">Copy it over to the default location:</p>
<div class="highlight-sh"><div class="highlight"><pre><span></span>sudo scl <span class="nb">enable</span> rh-ruby22 -- rake install
</pre></div>
</div>
</li>
<li><p class="first">Restart the Apache server:</p>
<div class="highlight-sh"><div class="highlight"><pre><span></span>sudo service httpd24-httpd restart
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>If using <strong>RHEL 7</strong> you will need to replace the above command with:</p>
<div class="last highlight-sh"><div class="highlight"><pre><span></span>sudo systemctl restart httpd24-httpd
</pre></div>
</div>
</div>
</li>
</ol>
<p>Close your browser so that you are properly logged out. Then open your browser
again and access the portal. You should now be able to authenticate with your
local username and password.</p>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../install-desktops.html" class="btn btn-neutral float-right" title="Install Desktops" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="add-ssl.html" class="btn btn-neutral" title="10. Add SSL Support" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Ohio Supercomputer Center.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>