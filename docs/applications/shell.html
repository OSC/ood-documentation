

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Shell App &mdash; Open OnDemand 0.0.1 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="author" title="About these documents"
              href="../about.html"/>
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Open OnDemand 0.0.1 documentation" href="../index.html"/>
        <link rel="up" title="Applications" href="../applications.html"/>
        <link rel="next" title="Files App" href="files.html"/>
        <link rel="prev" title="Dashboard App" href="dashboard.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Open OnDemand
          

          
          </a>

          
            
            
              <div class="version">
                0.0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../about.html">What is Open OnDemand</a></li>
</ul>
<p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
</ul>
<p class="caption"><span class="caption-text">Components</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../infrastructure.html">Infrastructure</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../applications.html">Applications</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="dashboard.html">Dashboard App</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Shell App</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#usage">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-it-works">How it Works</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="files.html">Files App</a></li>
<li class="toctree-l2"><a class="reference internal" href="editor.html">File Editor App</a></li>
<li class="toctree-l2"><a class="reference internal" href="active-jobs.html">Active Jobs App</a></li>
<li class="toctree-l2"><a class="reference internal" href="my-jobs.html">My Jobs App</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user-documentation.html">User Documentation</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Open OnDemand</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../applications.html">Applications</a> &raquo;</li>
        
      <li>Shell App</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/applications/shell.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="shell-app">
<span id="shell"></span><h1>Shell App<a class="headerlink" href="#shell-app" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://github.com/OSC/ood-shell">View on Github</a></p>
<div class="figure align-center" id="id1">
<img alt="../_images/shell-app.png" src="../_images/shell-app.png" />
<p class="caption"><span class="caption-number">Fig. 3 </span><span class="caption-text">Example of the Shell App connected to a compute node with <code class="docutils literal"><span class="pre">htop</span></code> running.</span></p>
</div>
<p>This Open OnDemand application provides a web-based terminal that connects the
user through an SSH session to either the local machine or any other machine
allowed within the internal network. Typically this will connect the user to a
login node. This application uses <a class="reference external" href="https://nodejs.org/en/">Node.js</a> for its exceptional support of
websockets providing a responsive user-experience as well as its event-driven
framework allowing for multiple sessions simultaneously.</p>
<p>The terminal client is an xterm-compatible terminal emulator written entirely
in JavaScript. The Shell App uses the Google client <a class="reference external" href="https://chromium.googlesource.com/apps/libapps/+/master/hterm">hterm</a> for this. It
performs reasonably well across most modern browsers on various operating
systems. It is currently used by the developers of Open OnDemand quite a bit.</p>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p>This app is deployed on the OnDemand Server under the following path on the
local file system:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">ood</span><span class="o">/</span><span class="n">apps</span><span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">shell</span>
</pre></div>
</div>
<p>and can be accessed with the following browser request:</p>
<dl class="get">
<dt id="get--pun-sys-shell-ssh-(host)-(path)">
<code class="descname">GET </code><code class="descname">/pun/sys/shell/ssh/</code><span class="sig-paren">(</span><em>host</em><span class="sig-paren">)</span><code class="descname">/</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="headerlink" href="#get--pun-sys-shell-ssh-(host)-(path)" title="Permalink to this definition">¶</a></dt>
<dd><p>Starts SSH session on <code class="docutils literal"><span class="pre">host</span></code> machine with current working directory
<code class="docutils literal"><span class="pre">path</span></code>.</p>
<p><strong>Example request</strong>:</p>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">GET</span> <span class="nn">/pun/sys/shell/ssh/default</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">ondemand.hpc.edu</span>
</pre></div>
</div>
<p>Starts SSH session on the default host (specified by system administrator
when app was first installed) in the user’s home directory.</p>
<p><strong>Example request</strong>:</p>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">GET</span> <span class="nn">/pun/sys/shell/ssh/node01.hpc.edu/home/user/path/to/work</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">ondemand.hpc.edu</span>
</pre></div>
</div>
<p>Starts SSH session on host <code class="docutils literal"><span class="pre">node01.hpc.edu</span></code> and changes working directory
to <code class="docutils literal"><span class="pre">/home/user/path/to/work</span></code>.</p>
</dd></dl>

</div>
<div class="section" id="how-it-works">
<h2>How it Works<a class="headerlink" href="#how-it-works" title="Permalink to this headline">¶</a></h2>
<p>Requirements needed for the Shell App to work on your local HPC network:</p>
<ul class="simple">
<li>OnDemand Server</li>
<li>An SSH Server running on the host machine that the Shell App connects to</li>
</ul>
<div class="figure align-center" id="id2">
<span id="shell-diagram"></span><img alt="../_images/shell-diagram.png" src="../_images/shell-diagram.png" />
<p class="caption"><span class="caption-number">Fig. 4 </span><span class="caption-text">Diagram detailing how the Shell App interacts with HPC infrastructure.</span></p>
</div>
<p><a class="reference internal" href="#shell-diagram"><span class="std std-numref">Fig. 4</span></a> details how the Shell App works on a local HPC system.
The user’s PUN running on the OnDemand Server launches the Node.js Shell App
through <a class="reference external" href="https://www.phusionpassenger.com/">Passenger</a> as the user. The Shell App then forks off an <code class="docutils literal"><span class="pre">ssh</span></code> process
that then connects to a server specified by the administrator (typically a
login node). The <code class="docutils literal"><span class="pre">stdin</span></code>, <code class="docutils literal"><span class="pre">stdout</span></code>, and <code class="docutils literal"><span class="pre">stderr</span></code> streams are all piped
through the websocket connection. When the user drops the websocket connection
(e.g., leaves the page, refreshes browser, drops connection) the <code class="docutils literal"><span class="pre">ssh</span></code>
process is terminated.</p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="files.html" class="btn btn-neutral float-right" title="Files App" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="dashboard.html" class="btn btn-neutral" title="Dashboard App" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Ohio Supercomputer Center.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>