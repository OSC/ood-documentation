

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>App Sharing &mdash; Open OnDemand 1.6.7 documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Tutorials: Interactive Apps" href="app-development/tutorials-interactive-apps.html" />
    <link rel="prev" title="Connection View" href="app-development/interactive/view.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html">
          

          
            
            <img src="_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.6
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">General</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="architecture.html">Architecture</a></li>
</ul>
<p class="caption"><span class="caption-text">Install</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="authentication.html">Authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation/add-cluster-config.html">Add Cluster Configuration Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation/resource-manager.html">Resource Manager Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="customization_overview.html">Customization Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="customization.html">Customization</a></li>
</ul>
<p class="caption"><span class="caption-text">Extend</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="app-development/interactive/setup.html">Setup Interactive Apps</a></li>
<li class="toctree-l1"><a class="reference internal" href="enable-desktops.html">Enable Interactive Desktop</a></li>
<li class="toctree-l1"><a class="reference internal" href="install-ihpc-apps.html">Install Other Interactive Apps</a></li>
<li class="toctree-l1"><a class="reference internal" href="app-development.html">App Development</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">App Sharing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#demo">Demo</a></li>
<li class="toctree-l2"><a class="reference internal" href="#enabling-app-sharing-dashboard">Enabling App Sharing Dashboard</a></li>
<li class="toctree-l2"><a class="reference internal" href="#controlling-who-can-share-and-access-apps">Controlling Who Can Share and Access Apps</a></li>
<li class="toctree-l2"><a class="reference internal" href="#known-issues">Known Issues</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="app-development/tutorials-interactive-apps.html">Tutorials: Interactive Apps</a></li>
<li class="toctree-l1"><a class="reference internal" href="app-development/tutorials-passenger-apps.html">Tutorials: Passenger Apps</a></li>
</ul>
<p class="caption"><span class="caption-text">Release Notes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="release-notes/v1.6-release-notes.html">v1.6 Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="release-notes/v1.5-release-notes.html">v1.5 Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="release-notes/v1.4-release-notes.html">v1.4 Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="release-notes/v1.3-release-notes.html">v1.3 Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="release-notes/v1.2-release-notes.html">v1.2 Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="release-notes/v1.1-release-notes.html">v1.1 Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="release-notes/v1.0-release-notes.html">v1.0 Release Notes</a></li>
</ul>
<p class="caption"><span class="caption-text">Legacy Docs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="infrastructure.html">Infrastructure</a></li>
<li class="toctree-l1"><a class="reference internal" href="applications.html">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="user-documentation.html">User Documentation</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Open OnDemand</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>App Sharing</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/OSC/ood-documentation/blob/release-1.6/source/app-sharing.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="app-sharing">
<span id="id1"></span><h1>App Sharing<a class="headerlink" href="#app-sharing" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>System installed by admin for everyone to launch (access control via file
permissions)</li>
<li>Source Code Sharing (share code, launch your own copy of an app). This is
like how the Job Composer works, or how many groups collaborate when using
HPC: they share their job scripts and code, and use their own copies to
submit jobs.</li>
<li>Executable Sharing (peer to peer) is where a user deploys an app in their
home directory that other users can launch. This is similar to adding to your
PATH the bin directory of another user.</li>
</ol>
<p>The rest of this document addresses OnDemand’s support for Executable Sharing.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Executable sharing means the app and all its code runs as the user
executing it, like everything else in OnDemand. User’s might not
realize this. We currently do not provide an opt in screen warning
users that this app “will have permission to do everything on their
behalf and act as them”. As a result, you should fully trust whoever
you enable to do share apps using executable sharing.</p>
</div>
</div>
<div class="section" id="demo">
<h2>Demo<a class="headerlink" href="#demo" title="Permalink to this headline">¶</a></h2>
<p>This is with two users Eric (efranz) and Bob (an0047).</p>
<p>Eric has a dev app “Matlab”, and interactive plugin app. Eric can</p>
<ol class="arabic simple">
<li>Launch Matlab</li>
<li>View and Edit the code</li>
</ol>
<div class="figure align-center">
<img alt="_images/app-sharing-1.png" src="_images/app-sharing-1.png" />
</div>
<p>Bob (an0047) cannot see this app because it is isolated in Eric’s “Sandbox”
i.e. <code class="docutils literal notranslate"><span class="pre">~efranz/ondemand/dev/matlab</span></code>:</p>
<div class="figure align-center">
<img alt="_images/app-sharing-2.png" src="_images/app-sharing-2.png" />
</div>
<p>If Eric shares the git repo path or URL with Bob, Bob can clone this into his
home directory if he is enabled as a developer. This is called “Source Code Sharing”.</p>
<p>Eric can share this app with Bob by selecting “My Shared Apps” and cloning the Matlab
repo to deploy <code class="docutils literal notranslate"><span class="pre">~efranz/ondemand/share/matlab</span></code></p>
<div class="figure align-center">
<img alt="_images/app-sharing-3.png" src="_images/app-sharing-3.png" />
</div>
<div class="figure align-center">
<img alt="_images/app-sharing-4.png" src="_images/app-sharing-4.png" />
</div>
<div class="figure align-center">
<img alt="_images/app-sharing-5.png" src="_images/app-sharing-5.png" />
</div>
<p>Now when Bob accesses the OnDemand home page he sees Eric’s MATLAB app and can
launch it:</p>
<div class="figure align-center">
<img alt="_images/app-sharing-6.png" src="_images/app-sharing-6.png" />
</div>
</div>
<div class="section" id="enabling-app-sharing-dashboard">
<h2>Enabling App Sharing Dashboard<a class="headerlink" href="#enabling-app-sharing-dashboard" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>To enable App Sharing in the Dashboard, set <code class="docutils literal notranslate"><span class="pre">OOD_APP_SHARING=1</span></code> in
<code class="docutils literal notranslate"><span class="pre">/etc/ood/config/apps/dashboard/env</span></code>.</li>
<li>Set <code class="docutils literal notranslate"><span class="pre">OOD_DASHBOARD_SUPPORT_EMAIL=your&#64;email.edu</span></code> to add a link to support
for finding an app.</li>
<li>Set <code class="docutils literal notranslate"><span class="pre">OOD_APP_CATALOG_URL=https://link.to.online/app/catalog</span></code> to link
externally to an advertised listing of apps available.</li>
</ol>
<p>Enabling App Sharing in the dashboard serves two primary purposes:</p>
<ol class="arabic simple">
<li>For shared app users, provide an interface to launch those apps</li>
<li>For app developers, provide an interface to help manage shared apps</li>
</ol>
<p>Currently this significantly changes the interface of the Dashboard. The MOTD
moves to the right of the screen and shared apps appear below the welcom logo
and text.</p>
<p>Before:</p>
<div class="figure align-center">
<img alt="_images/app-sharing-mode-before.png" src="_images/app-sharing-mode-before.png" />
</div>
<p>After:</p>
<div class="figure align-center">
<img alt="_images/app-sharing-mode-after.png" src="_images/app-sharing-mode-after.png" />
</div>
</div>
<div class="section" id="controlling-who-can-share-and-access-apps">
<h2>Controlling Who Can Share and Access Apps<a class="headerlink" href="#controlling-who-can-share-and-access-apps" title="Permalink to this headline">¶</a></h2>
<p>Shared apps are deployed to
<code class="docutils literal notranslate"><span class="pre">/var/www/ood/apps/usr/$USERNAME/gateway/$APPNAME</span></code>. We recommend <code class="docutils literal notranslate"><span class="pre">gateway</span></code>
be a symlink to the user’s home directory at <code class="docutils literal notranslate"><span class="pre">~username/ondemand/share</span></code> and
by default set <code class="docutils literal notranslate"><span class="pre">750</span></code> permissions on <code class="docutils literal notranslate"><span class="pre">/var/www/ood/apps/usr/$USERNAME</span></code>. This
approach has these benefits:</p>
<ol class="arabic simple">
<li>The admin as root controls who can share apps by creating root owned
directories like <code class="docutils literal notranslate"><span class="pre">/var/www/ood/apps/usr/efranz</span></code> and
<code class="docutils literal notranslate"><span class="pre">/var/www/ood/apps/usr/an0047</span></code>.</li>
<li>The admin controls who can access that user’s shared apps by setting
permissions on this directory. Thus by setting <code class="docutils literal notranslate"><span class="pre">750</span></code> on
<code class="docutils literal notranslate"><span class="pre">/var/www/ood/apps/usr/an0047</span></code> this ensures that an0047 can only share
apps with users in his primary group. At times we have created a supplemental group (shinyusr) and chgrp the share directory to this group so
that the develepr can share apps with every user in this group.</li>
<li>The developer who can share apps can modify permissions on the app
directories themselves i.e.
<code class="docutils literal notranslate"><span class="pre">/var/www/ood/apps/usr/an0047/gateway/customapp</span></code>
so that only a subset of the users he could share with have access. This can
be done through FACLs or using the same chgrp + 755 approach</li>
</ol>
<p>In summary, to enable a new user to create shared apps, run these commands:</p>
<div class="code sh highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># given a user efranz</span>
<span class="n">sudo</span> <span class="n">mkdir</span> <span class="o">-</span><span class="n">p</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">ood</span><span class="o">/</span><span class="n">apps</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">efranz</span>
<span class="n">cd</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">ood</span><span class="o">/</span><span class="n">apps</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">efranz</span>
<span class="n">chmod</span> <span class="mi">750</span> <span class="o">.</span>
<span class="n">ln</span> <span class="o">-</span><span class="n">s</span> <span class="o">~</span><span class="n">efranz</span><span class="o">/</span><span class="n">ondemand</span><span class="o">/</span><span class="n">share</span> <span class="n">gateway</span>
</pre></div>
</div>
</div>
<div class="section" id="known-issues">
<h2>Known Issues<a class="headerlink" href="#known-issues" title="Permalink to this headline">¶</a></h2>
<p>This is being documented as is. There parts of this feature that work well at
OSC but may need fixed before working at another center.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="app-development/tutorials-interactive-apps.html" class="btn btn-neutral float-right" title="Tutorials: Interactive Apps" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="app-development/interactive/view.html" class="btn btn-neutral float-left" title="Connection View" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017-2019, Ohio Supercomputer Center

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Documentation Versions</span>
    v: 
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Versions</dt>
      
        <dd><a href="https://OSC.github.io/ood-documentation/master/app-sharing.html">master</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.6/app-sharing.html">1.6</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.5/app-sharing.html">1.5</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.4/app-sharing.html">1.4</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.3/app-sharing.html">1.3</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.2/app-sharing.html">1.2</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.1/app-sharing.html">1.1</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.0/app-sharing.html">1.0</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/develop/app-sharing.html">develop</a></dd>
      
    </dl>
    <dl>
      <dt>On GitHub</dt>
        <dd>
          <a href="http://openondemand.org/">Website</a>
        </dd>
        <dd>
          <a href="https://github.com/OSC/Open-OnDemand">Main Repo</a>
        </dd>
    </dl>
    <hr/>
    Theme provided by <a href="http://www.readthedocs.org">Read the Docs</a>.
  </div>
</div>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>