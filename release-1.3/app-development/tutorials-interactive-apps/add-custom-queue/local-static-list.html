

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Use a Local Static List &mdash; Open OnDemand 1.3.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../../_static/css/custom.css" type="text/css" />
  

  
        <link rel="author" title="About these documents"
              href="../../../about.html"/>
        <link rel="index" title="Index"
              href="../../../genindex.html"/>
        <link rel="search" title="Search" href="../../../search.html"/>
    <link rel="top" title="Open OnDemand 1.3.0 documentation" href="../../../index.html"/>
        <link rel="up" title="Add Custom Queues/Partitions" href="../add-custom-queue.html"/>
        <link rel="next" title="Use a Global Static List" href="global-static-list.html"/>
        <link rel="prev" title="Add Custom Queues/Partitions" href="../add-custom-queue.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html">
          

          
            
            <img src="../../../_static/logo.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                1.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../about.html">What is Open OnDemand</a></li>
</ul>
<p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../enable-desktops.html">Enable Interactive Desktop</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../install-ihpc-apps.html">Install Other Interactive Apps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../authentication.html">Authentication</a></li>
</ul>
<p class="caption"><span class="caption-text">Components</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../infrastructure.html">Infrastructure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../applications.html">Applications</a></li>
</ul>
<p class="caption"><span class="caption-text">Resources</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../user-documentation.html">User Documentation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../app-development.html">App Development</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../enabling-development-mode.html">Enabling App Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../interactive.html">Interactive Apps (Plugins)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorials-passenger-apps.html">Tutorials: Passenger Apps</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../tutorials-interactive-apps.html">Tutorials: Interactive Apps</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../add-jupyter.html">Add a Jupyter App</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../add-custom-queue.html">Add Custom Queues/Partitions</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">Use a Local Static List</a></li>
<li class="toctree-l4"><a class="reference internal" href="global-static-list.html">Use a Global Static List</a></li>
<li class="toctree-l4"><a class="reference internal" href="local-dynamic-list.html">Use a Local Dynamic List</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Release Notes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../release-notes/v1.3-release-notes.html">v1.3 Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../release-notes/v1.2-release-notes.html">v1.2 Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../release-notes/v1.1-release-notes.html">v1.1 Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../release-notes/v1.0-release-notes.html">v1.0 Release Notes</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Open OnDemand</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../../app-development.html">App Development</a> &raquo;</li>
        
          <li><a href="../../tutorials-interactive-apps.html">Tutorials: Interactive Apps</a> &raquo;</li>
        
          <li><a href="../add-custom-queue.html">Add Custom Queues/Partitions</a> &raquo;</li>
        
      <li>Use a Local Static List</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/OSC/ood-documentation/blob/release-1.3/source/app-development/tutorials-interactive-apps/add-custom-queue/local-static-list.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="use-a-local-static-list">
<span id="app-development-tutorials-interactive-apps-add-custom-queue-local-static-list"></span><h1>Use a Local Static List<a class="headerlink" href="#use-a-local-static-list" title="Permalink to this headline">¶</a></h1>
<p>The <em>simplest</em> customization can be done by defining a static list of
queues/partitions within the Interactive App that a user can submit the batch
job to. This is accomplished by:</p>
<ol class="arabic simple">
<li><a class="reference internal" href="#app-development-tutorials-interactive-apps-add-custom-queue-local-static-list-add-custom-attribute"><span class="std std-ref">Add Custom Attribute to Form</span></a></li>
<li><a class="reference internal" href="#app-development-tutorials-interactive-apps-add-custom-queue-local-static-list-handle-custom-attribute"><span class="std std-ref">Handle Custom Attribute in Job Submission</span></a></li>
</ol>
<div class="section" id="add-custom-attribute-to-form">
<span id="app-development-tutorials-interactive-apps-add-custom-queue-local-static-list-add-custom-attribute"></span><h2>Add Custom Attribute to Form<a class="headerlink" href="#add-custom-attribute-to-form" title="Permalink to this headline">¶</a></h2>
<p>We want to <strong>replace</strong> the <code class="docutils literal notranslate"><span class="pre">bc_queue</span></code> form attribute with a custom HTML
<code class="docutils literal notranslate"><span class="pre">&lt;select&gt;</span></code> element (a drop-down list of options).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can read more about customizing attributes in the <code class="docutils literal notranslate"><span class="pre">form.yml</span></code> file for
Interactive Apps under the
<a class="reference internal" href="../../interactive/form.html#interactive-development-form-customizing-attributes"><span class="std std-ref">Customizing Attributes</span></a> section.</p>
</div>
<ol class="arabic">
<li><p class="first">We first start with the default <code class="docutils literal notranslate"><span class="pre">form.yml</span></code> for the Jupyter Interactive
App:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># ~/ondemand/dev/jupyter/form.yml</span>
<span class="nn">---</span>
<span class="l l-Scalar l-Scalar-Plain">cluster</span><span class="p p-Indicator">:</span> <span class="s">&quot;my_cluster&quot;</span>
<span class="l l-Scalar l-Scalar-Plain">attributes</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">modules</span><span class="p p-Indicator">:</span> <span class="s">&quot;python&quot;</span>
  <span class="l l-Scalar l-Scalar-Plain">extra_jupyter_args</span><span class="p p-Indicator">:</span> <span class="s">&quot;&quot;</span>
<span class="l l-Scalar l-Scalar-Plain">form</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">modules</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">extra_jupyter_args</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">bc_account</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">bc_queue</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">bc_num_hours</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">bc_num_slots</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">bc_email_on_started</span>
</pre></div>
</div>
</li>
<li><p class="first">Next we remove the <code class="docutils literal notranslate"><span class="pre">bc_queue</span></code> field from our <code class="docutils literal notranslate"><span class="pre">form.yml</span></code> for the Jupyter
Interactive App by removing the following line from this file:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">bc_account</span>
<span class="hll"><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">bc_queue</span>
</span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">bc_num_hours</span>
</pre></div>
</div>
<p>Now when we refresh the web page for our sandbox Jupyter App we won’t see
the “Queue” form element anymore.</p>
</li>
<li><p class="first">We now add in our custom drop-down attribute with a defined list of
queues/partitions:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># ~/ondemand/dev/jupyter/form.yml</span>
<span class="nn">---</span>
<span class="l l-Scalar l-Scalar-Plain">cluster</span><span class="p p-Indicator">:</span> <span class="s">&quot;my_cluster&quot;</span>
<span class="l l-Scalar l-Scalar-Plain">attributes</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">modules</span><span class="p p-Indicator">:</span> <span class="s">&quot;python&quot;</span>
  <span class="l l-Scalar l-Scalar-Plain">extra_jupyter_args</span><span class="p p-Indicator">:</span> <span class="s">&quot;&quot;</span>
<span class="hll">  <span class="l l-Scalar l-Scalar-Plain">custom_queue</span><span class="p p-Indicator">:</span>
</span><span class="hll">    <span class="l l-Scalar l-Scalar-Plain">label</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Queue</span>
</span><span class="hll">    <span class="l l-Scalar l-Scalar-Plain">help</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Please select a queue from the drop-down.</span>
</span><span class="hll">    <span class="l l-Scalar l-Scalar-Plain">widget</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">select</span>
</span><span class="hll">    <span class="l l-Scalar l-Scalar-Plain">options</span><span class="p p-Indicator">:</span>
</span><span class="hll">      <span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span> <span class="s">&quot;Queue</span><span class="nv"> </span><span class="s">1&quot;</span><span class="p p-Indicator">,</span> <span class="s">&quot;queue1&quot;</span> <span class="p p-Indicator">]</span>
</span><span class="hll">      <span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span> <span class="s">&quot;Queue</span><span class="nv"> </span><span class="s">2&quot;</span><span class="p p-Indicator">,</span> <span class="s">&quot;queue2&quot;</span> <span class="p p-Indicator">]</span>
</span><span class="l l-Scalar l-Scalar-Plain">form</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">modules</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">extra_jupyter_args</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">bc_account</span>
<span class="hll">  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">custom_queue</span>
</span>  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">bc_num_hours</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">bc_num_slots</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">bc_email_on_started</span>
</pre></div>
</div>
<p>Now when we refresh the web page for our sandbox Jupyter App we will see a
“Queue” form element with a drop-down that lists “queue1” and “queue2”.
Underneath this will be our custom help message defined above.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>An attribute with the field <code class="docutils literal notranslate"><span class="pre">widget:</span> <span class="pre">select</span></code> expects an <code class="docutils literal notranslate"><span class="pre">options:</span></code>
field with an array of pairs. The first string in the pair is the option
text and the second string in the pair is the option value.</p>
<p>For example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">widget</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">select</span>
<span class="l l-Scalar l-Scalar-Plain">options</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span> <span class="s">&quot;Volvo&quot;</span><span class="p p-Indicator">,</span> <span class="s">&quot;volvo&quot;</span> <span class="p p-Indicator">]</span>
  <span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span> <span class="s">&quot;Ford&quot;</span><span class="p p-Indicator">,</span> <span class="s">&quot;ford&quot;</span> <span class="p p-Indicator">]</span>
  <span class="p p-Indicator">-</span> <span class="p p-Indicator">[</span> <span class="s">&quot;Toyota&quot;</span><span class="p p-Indicator">,</span> <span class="s">&quot;toyota&quot;</span> <span class="p p-Indicator">]</span>
</pre></div>
</div>
<p class="last">The user will see a list of options: “Volvo”, “Ford”, and “Toyota” to
choose from in the HTML form, but the backend will process a value of
either “volvo”, “ford”, or “toyota” depending on what the user chose.</p>
</div>
</li>
</ol>
</div>
<div class="section" id="handle-custom-attribute-in-job-submission">
<span id="app-development-tutorials-interactive-apps-add-custom-queue-local-static-list-handle-custom-attribute"></span><h2>Handle Custom Attribute in Job Submission<a class="headerlink" href="#handle-custom-attribute-in-job-submission" title="Permalink to this headline">¶</a></h2>
<p>Now that we have our custom form attribute called <code class="docutils literal notranslate"><span class="pre">custom_queue</span></code>, we need to
tell our app how to handle it when submitting the job. As of right now our app
has no idea what to do with this value when the user clicks “Launch” after
filling out the form.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can read more about customizing submission arguments in the
<code class="docutils literal notranslate"><span class="pre">submit.yml.erb</span></code> file for Interactive Apps under the
<a class="reference internal" href="../../interactive/submit.html#app-development-interactive-submit"><span class="std std-ref">Job Submission</span></a> section.</p>
</div>
<ol class="arabic">
<li><p class="first">We first start with the default <code class="docutils literal notranslate"><span class="pre">submit.yml.erb</span></code> for the Jupyter
Interactive App:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># ~/ondemand/dev/jupyter/submit.yml.erb</span>
<span class="nn">---</span>
<span class="l l-Scalar l-Scalar-Plain">batch_connect</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">template</span><span class="p p-Indicator">:</span> <span class="s">&quot;basic&quot;</span>
</pre></div>
</div>
</li>
<li><p class="first">We now create a <code class="docutils literal notranslate"><span class="pre">script:</span></code> section if it doesn’t already exist and handle
the value of the <code class="docutils literal notranslate"><span class="pre">custom_queue</span></code> attribute submitted by the user:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># ~/ondemand/dev/jupyter/submit.yml.erb</span>
<span class="nn">---</span>
<span class="l l-Scalar l-Scalar-Plain">batch_connect</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">template</span><span class="p p-Indicator">:</span> <span class="s">&quot;basic&quot;</span>
<span class="hll"><span class="l l-Scalar l-Scalar-Plain">script</span><span class="p p-Indicator">:</span>
</span><span class="hll">  <span class="l l-Scalar l-Scalar-Plain">queue_name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;%= custom_queue %&gt;</span>
</span></pre></div>
</div>
<p>Where we take advantage of the generic <a class="reference external" href="http://www.rubydoc.info/gems/ood_core/OodCore/Job/Script#queue_name-instance_method">OodCore::Job::Script#queue_name</a> method to supply a queue/partition that is resource manager
(e.g., Slurm, Torque, …) agnostic.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>For the queue/partition we do not need to use the <code class="docutils literal notranslate"><span class="pre">native:</span></code> field which
<strong>must be</strong> customized for the specific resource manager you are
leveraging.</p>
<p class="last">You can find a list of generic fields that are resource manager agnostic
under the <a class="reference external" href="http://www.rubydoc.info/gems/ood_core/OodCore/Job/Script">OodCore::Job::Script</a> documentation.</p>
</div>
</li>
</ol>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="global-static-list.html" class="btn btn-neutral float-right" title="Use a Global Static List" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../add-custom-queue.html" class="btn btn-neutral" title="Add Custom Queues/Partitions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Ohio Supercomputer Center.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'1.3.0',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>