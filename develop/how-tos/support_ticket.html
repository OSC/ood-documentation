

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Support Ticket &mdash; Open OnDemand 2.0.20 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
  <link rel="stylesheet" href="../_static/tabs.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Release Notes" href="../release-notes.html" />
    <link rel="prev" title="PUN environment" href="../reference/pun-environment.html" />
 
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-34776817-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-34776817-3');
</script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/logo.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                2.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../requirements.html">Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../authentication.html">Authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation/add-cluster-config.html">Cluster Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="app-development/interactive/setup.html">Setup Interactive Apps</a></li>
</ul>
<p class="caption"><span class="caption-text">How-Tos</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../customizations.html">Customizations</a></li>
<li class="toctree-l1"><a class="reference internal" href="debug.html">Debugging and Monitoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="../enable-desktops.html">Enable Interactive Desktop</a></li>
<li class="toctree-l1"><a class="reference internal" href="app-development.html">App Development</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../install-ihpc-apps.html">Install Other Interactive Apps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/tutorials-interactive-apps.html">Tutorials: Interactive Apps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/tutorials-passenger-apps.html">Tutorials: Passenger Apps</a></li>
</ul>
<p class="caption"><span class="caption-text">More</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../architecture.html">Architecture</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../reference.html">Configuration Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../reference/files/ood-portal-yml.html">ood_portal.yml</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/files/nginx-stage-yml.html">nginx_stage.yml</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/files/ondemand-d-ymls.html">ondemand.d/*.yml files</a></li>
<li class="toctree-l2"><a class="reference internal" href="app-development/interactive/submit.html">Job Submission (submit.yml.erb)</a></li>
<li class="toctree-l2"><a class="reference internal" href="app-development/interactive/form.html">User Form (form.yml.erb)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/commands/ood-portal-generator.html">ood-portal-generator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/commands/nginx-stage/usage.html">nginx-stage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/pun-environment.html">PUN environment</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Support Ticket</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#configuration">Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#customizations">Customizations</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../release-notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../issues/overview.html">OnDemand’s Known Issues</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Open OnDemand</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../reference.html">Configuration Reference</a> &raquo;</li>
        
      <li>Support Ticket</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/OSC/ood-documentation/blob/develop/source/how-tos/support_ticket.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="support-ticket">
<span id="support-ticket-guide"></span><h1>Support Ticket<a class="headerlink" href="#support-ticket" title="Permalink to this headline">¶</a></h1>
<p>The Dashboard now supports sending a support ticket to your institution Help Desk system.
The feature uses email as the delivery mechanism, but it could be extended to support others.</p>
<p>To enable this feature, define the settings needed using the the configuration property <code class="docutils literal notranslate"><span class="pre">support_ticket</span></code>.
Once this configuration object is defined, the <code class="docutils literal notranslate"><span class="pre">Submit</span> <span class="pre">Support</span> <span class="pre">Ticket</span></code> link will be shown in the <code class="docutils literal notranslate"><span class="pre">Help</span></code> navigation menu
and in all interactive session cards.</p>
<div class="figure align-center">
<img alt="../_images/support_ticket_menu.png" src="../_images/support_ticket_menu.png" />
</div>
<p>The support ticket page has a simple form to gather information that will be submitted to the support system via email.
If triggered from a session card, the system will automatically add information about the selected
session to the body of the email to help troubleshoot the issue.</p>
<div class="figure align-center">
<img alt="../_images/support_ticket_form.png" src="../_images/support_ticket_form.png" />
</div>
<p>A brief description of the default form fields used in the support ticket form:</p>
<ul class="simple">
<li><p><strong>Username:</strong> Logged in user. Username will be added to the support ticket body for reference.</p></li>
<li><p><strong>Email:</strong> Email address to communicate regarding this support ticket. A single email address is supported.</p></li>
<li><p><strong>CC:</strong> Additional email address to communicate regardig this ticket. A single email address is supported.</p></li>
<li><p><strong>Subject:</strong> Brief description of the problem.</p></li>
<li><p><strong>Attachments:</strong> Add screeshots of the problem to help with debugging and troubleshooting.</p></li>
<li><p><strong>Description:</strong> Detail description of the problem.</p></li>
</ul>
<div class="section" id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<p>These are the most common configuration properties needed to enable and setup the support ticket feature:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">description</span></code>: Text to customize the support ticket header. It supports HTML.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">from</span></code>: The email address to set the email from field when sending the email. It defaults to the email field set in the form.
This is useful to prevent the incoming emails being considered spam.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">to</span></code>: The destination email address of your Help Desk.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">delivery_method</span></code>: Rails setting to set the transport mechanism to use. This is usually <code class="docutils literal notranslate"><span class="pre">smtp</span></code>.
For more information see the <a class="reference external" href="https://guides.rubyonrails.org/action_mailer_basics.html#action-mailer-configuration">Rails documentation on mailers</a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">delivery_settings</span></code>: Rails settings object to set the transport configuration properties.
See example below or the <a class="reference external" href="https://guides.rubyonrails.org/action_mailer_basics.html#action-mailer-configuration">Rails documentation on mailers</a>.</p></li>
</ul>
<p>Sample configuration:</p>
<blockquote>
<div><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">support_ticket</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">email</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="c1"># Optional.</span><span class="w"></span>
<span class="w">    </span><span class="c1"># Text/HTML added to the page under the support ticket header</span><span class="w"></span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span><span class="w"></span>
<span class="w">      </span><span class="no">&lt;strong&gt;My Description Text&lt;/strong&gt;&lt;br /&gt;</span><span class="w"></span>
<span class="w">      </span><span class="no">This is a description text for the frontend with HTML support</span><span class="w"></span>
<span class="w">    </span><span class="c1"># Optional.</span><span class="w"></span>
<span class="w">    </span><span class="c1"># To set the email from field. Defaults to the email set in the form.</span><span class="w"></span>
<span class="w">    </span><span class="nt">from</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;config@example.com&quot;</span><span class="w"></span>
<span class="w">    </span><span class="c1"># Required.</span><span class="w"></span>
<span class="w">    </span><span class="c1"># Your support system email address. The email will be sent to this address</span><span class="w"></span>
<span class="w">    </span><span class="nt">to</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;support@support.system.com&quot;</span><span class="w"></span>
<span class="w">    </span><span class="c1"># delivery_method and delivery_settings are Rails configuration items</span><span class="w"></span>
<span class="w">    </span><span class="c1"># that can be set in this file to simplify configuration.</span><span class="w"></span>
<span class="w">    </span><span class="c1"># If you prefer, you can configure Rails in the usual way.</span><span class="w"></span>
<span class="w">    </span><span class="nt">delivery_method</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;smtp&quot;</span><span class="w"></span>
<span class="w">    </span><span class="nt">delivery_settings</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">address</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;smtp.gmail.com&#39;</span><span class="w"></span>
<span class="w">      </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">587</span><span class="w"></span>
<span class="w">      </span><span class="nt">domain</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;example.com&#39;</span><span class="w"></span>
<span class="w">      </span><span class="nt">user_name</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&lt;username&gt;&#39;</span><span class="w"></span>
<span class="w">      </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&lt;password&gt;&#39;</span><span class="w"></span>
<span class="w">      </span><span class="nt">authentication</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;plain&#39;</span><span class="w"></span>
<span class="w">      </span><span class="nt">enable_starttls_auto</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
<span class="w">      </span><span class="nt">open_timeout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">15</span><span class="w"></span>
<span class="w">      </span><span class="nt">read_timeout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">15</span><span class="w"></span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="customizations">
<h2>Customizations<a class="headerlink" href="#customizations" title="Permalink to this headline">¶</a></h2>
<p>The support ticket form can be customized using the <code class="docutils literal notranslate"><span class="pre">form</span></code> and <code class="docutils literal notranslate"><span class="pre">attributes</span></code> configuration properties.
In the same way that you can configure the <a class="reference internal" href="../enable-desktops/modify-form-attributes.html#enable-desktops-modify-form-attributes"><span class="std std-ref">form for interactive applications</span></a>,
the support ticket form fields can be arranged or changed as required.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please note that an <code class="docutils literal notranslate"><span class="pre">email</span></code> field must be present in the form for the support ticket feature to be funtional.</p>
</div>
<p>Custom fields can be added, but they will require a custom email template to make use of the field values to generate the email body.
Drop the template file into <code class="docutils literal notranslate"><span class="pre">/etc/ood/config/apps/dashboard/views/support_ticket/email</span></code> folder and reference it
in the configuration. This template file can be any format Rails recognizes for emails, usually the <code class="docutils literal notranslate"><span class="pre">.txt.erb</span></code> extension.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Rails expects files to be prefixed with an underscore. For example if you configured <code class="docutils literal notranslate"><span class="pre">my_email_template</span></code>
the filename should be <code class="docutils literal notranslate"><span class="pre">_my_email_template.text.erb</span></code>.</p>
</div>
<p>The example below shows a custom template configuration with 3 fields and how to use them in the template to generate the email body.</p>
<blockquote>
<div><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">support_ticket</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">email_template</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;custom_template&quot;</span><span class="w"></span>
<span class="w">  </span><span class="nt">attributes</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">email</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">required</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
<span class="w">    </span><span class="nt">subject</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;OnDemand</span><span class="nv"> </span><span class="s">Problem:</span><span class="nv"> </span><span class="s">&quot;</span><span class="w"></span>
<span class="w">  </span><span class="nt">form</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">email</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">subject</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">department</span><span class="w"></span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># /etc/ood/config/apps/dashboard/views/support_ticket/email/_custom_template.txt.erb</span>
<span class="n">Email</span> <span class="n">Intro</span>
<span class="n">Department</span><span class="p">:</span> <span class="o">&lt;%=</span> <span class="nd">@context</span><span class="o">.</span><span class="n">support_ticket</span><span class="o">.</span><span class="n">department</span> <span class="o">%&gt;</span>
<span class="n">Subject</span> <span class="n">Copy</span><span class="p">:</span> <span class="o">&lt;%=</span> <span class="nd">@context</span><span class="o">.</span><span class="n">support_ticket</span><span class="o">.</span><span class="n">subject</span> <span class="o">%&gt;</span>

<span class="n">Other</span> <span class="n">static</span> <span class="n">data</span><span class="o">.</span>
</pre></div>
</div>
</div></blockquote>
<div class="figure align-center">
<img alt="../_images/support_ticket_custom_form.png" src="../_images/support_ticket_custom_form.png" />
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../release-notes.html" class="btn btn-neutral float-right" title="Release Notes" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../reference/pun-environment.html" class="btn btn-neutral float-left" title="PUN environment" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017-2023, Ohio Supercomputer Center

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Documentation Versions</span>
    v: 
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Versions</dt>
      
        <dd><a href="https://OSC.github.io/ood-documentation/latest/how-tos/support_ticket.html">latest</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-2.0/how-tos/support_ticket.html">2.0</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.8/how-tos/support_ticket.html">1.8</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.7/how-tos/support_ticket.html">1.7</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.6/how-tos/support_ticket.html">1.6</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.5/how-tos/support_ticket.html">1.5</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.4/how-tos/support_ticket.html">1.4</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.3/how-tos/support_ticket.html">1.3</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.2/how-tos/support_ticket.html">1.2</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.1/how-tos/support_ticket.html">1.1</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.0/how-tos/support_ticket.html">1.0</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/develop/how-tos/support_ticket.html">develop</a></dd>
      
    </dl>
    <dl>
      <dt>On GitHub</dt>
        <dd>
          <a href="http://openondemand.org/">Website</a>
        </dd>
        <dd>
          <a href="https://github.com/OSC/Open-OnDemand">Main Repo</a>
        </dd>
    </dl>
    <hr/>
    Theme provided by <a href="http://www.readthedocs.org">Read the Docs</a>.
  </div>
</div>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>