

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Configuration &mdash; Open OnDemand develop documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="author" title="About these documents"
              href="../../about.html"/>
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="Open OnDemand develop documentation" href="../../index.html"/>
        <link rel="up" title="ood-portal-generator" href="../ood-portal-generator.html"/>
        <link rel="next" title="Examples" href="examples.html"/>
        <link rel="prev" title="Usage" href="usage.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> Open OnDemand
          

          
          </a>

          
            
            
              <div class="version">
                develop
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../about.html">What is Open OnDemand</a></li>
</ul>
<p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../install-desktops.html">Install Desktops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../updating.html">Updating</a></li>
</ul>
<p class="caption"><span class="caption-text">Components</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../infrastructure.html">Infrastructure</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../ood-portal-generator.html">ood-portal-generator</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="usage.html">Usage</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#configure-general-options">Configure General Options</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configure-public-assets">Configure Public Assets</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configure-logout-redirect">Configure Logout Redirect</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configure-reverse-proxy">Configure Reverse Proxy</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configure-per-user-nginx">Configure per-user NGINX</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configure-openid-connect">Configure OpenID Connect</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configure-user-registration">Configure User Registration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="examples.html">Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../mod-ood-proxy.html">mod_ood_proxy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ood-auth-map.html">ood_auth_map</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nginx-stage.html">nginx_stage</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../applications.html">Applications</a></li>
</ul>
<p class="caption"><span class="caption-text">Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../user-documentation.html">User Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq.html">FAQ</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Open OnDemand</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../infrastructure.html">Infrastructure</a> &raquo;</li>
        
          <li><a href="../ood-portal-generator.html">ood-portal-generator</a> &raquo;</li>
        
      <li>Configuration</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/infrastructure/ood-portal-generator/configuration.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="configuration">
<span id="ood-portal-generator-configuration"></span><h1>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h1>
<p>Relying on the default build is fine for a demo deployment, but it is not
recommended for a production environment. Options can be configured by
including a file called <code class="docutils literal"><span class="pre">config.yml</span></code> with your configuration settings in the
root directory before running <strong class="program">rake</strong>.</p>
<p>This project includes a good starting configuration file that you can use:</p>
<div class="highlight-sh"><div class="highlight"><pre><span></span>cp config.default.yml config.yml
</pre></div>
</div>
<p>All the default options are listed in this configuration file. Feel free to
read it through before continuing on.</p>
<div class="section" id="configure-general-options">
<h2>Configure General Options<a class="headerlink" href="#configure-general-options" title="Permalink to this headline">¶</a></h2>
<dl class="describe">
<dt>
<code class="descname">listen_addr_port (String, Array&lt;String&gt;, null)</code></dt>
<dd><p>the address and port server listens on for connections</p>
<dl class="docutils">
<dt>Default</dt>
<dd><p class="first">Don’t add a <code class="docutils literal"><span class="pre">Listen</span></code> directive in this Apache config (typically it
exists in another config)</p>
<div class="last highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">listen_addr_port</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">null</span>
</pre></div>
</div>
</dd>
<dt>Example</dt>
<dd><p class="first">Explicitly listen on port 443</p>
<div class="last highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">listen_addr_port</span><span class="p p-Indicator">:</span> <span class="s">&quot;443&quot;</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="describe">
<dt>
<code class="descname">servername (String, null)</code></dt>
<dd><p>the host name used to access the Open OnDemand portal</p>
<dl class="docutils">
<dt>Default</dt>
<dd><p class="first">Access website through IP address only</p>
<div class="last highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">servername</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">null</span>
</pre></div>
</div>
</dd>
<dt>Example</dt>
<dd><p class="first">Access website through the host name <code class="docutils literal"><span class="pre">www.example.com</span></code></p>
<div class="last highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">servername</span><span class="p p-Indicator">:</span> <span class="s">&quot;www.example.com&quot;</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="describe">
<dt>
<code class="descname">port (Integer, null)</code></dt>
<dd><p>the port used to access the Open OnDemand portal (if different than <code class="docutils literal"><span class="pre">80</span></code>
or <code class="docutils literal"><span class="pre">443</span></code>)</p>
<dl class="docutils">
<dt>Default</dt>
<dd><p class="first">Use port <code class="docutils literal"><span class="pre">80</span></code> or port <code class="docutils literal"><span class="pre">443</span></code> if SSL is enabled</p>
<div class="last highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">port</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">null</span>
</pre></div>
</div>
</dd>
<dt>Example</dt>
<dd><p class="first">Use a higher numbered port to access the website</p>
<div class="last highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">port</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">8080</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="describe">
<dt>
<code class="descname">ssl (Array&lt;String&gt;, null)</code></dt>
<dd><p>a list of Apache directives that enable SSL support</p>
<dl class="docutils">
<dt>Default</dt>
<dd><p class="first">Disable SSL support</p>
<div class="last highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">ssl</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">null</span>
</pre></div>
</div>
</dd>
<dt>Example</dt>
<dd>See <a class="reference internal" href="examples/add-ssl-support.html#add-ssl-support"><span class="std std-ref">Add SSL Support</span></a></dd>
</dl>
</dd></dl>

<dl class="describe">
<dt>
<code class="descname">logroot (String)</code></dt>
<dd><p>the root directory where log files are stored (can be relative to
<code class="docutils literal"><span class="pre">ServerRoot</span></code>)</p>
<dl class="docutils">
<dt>Default</dt>
<dd><p class="first">Store logs in <code class="docutils literal"><span class="pre">$ServerRoot/logs</span></code> directory</p>
<div class="last highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">logroot</span><span class="p p-Indicator">:</span> <span class="s">&quot;logs&quot;</span>
</pre></div>
</div>
</dd>
<dt>Example</dt>
<dd><p class="first">Store logs in a different directory</p>
<div class="last highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">logroot</span><span class="p p-Indicator">:</span> <span class="s">&quot;/path/to/my/logs&quot;</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="describe">
<dt>
<code class="descname">lua_root (String)</code></dt>
<dd><p>the root directory where the Lua handler code resides</p>
<dl class="docutils">
<dt>Default</dt>
<dd><p class="first">Point to the install location of <a class="reference internal" href="../mod-ood-proxy.html#mod-ood-proxy"><span class="std std-ref">mod_ood_proxy</span></a></p>
<div class="last highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">lua_root</span><span class="p p-Indicator">:</span> <span class="s">&quot;/opt/ood/mod_ood_proxy/lib&quot;</span>
</pre></div>
</div>
</dd>
<dt>Example</dt>
<dd><p class="first">Point to a different directory</p>
<div class="last highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">lua_root</span><span class="p p-Indicator">:</span> <span class="s">&quot;/path/to/lua/handlers&quot;</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="describe">
<dt>
<code class="descname">lua_log_level (String, null)</code></dt>
<dd><p>the verbosity of the Lua module in the logs</p>
<dl class="docutils">
<dt>Default</dt>
<dd><p class="first">Use default log level of <code class="docutils literal"><span class="pre">warn</span></code></p>
<div class="last highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">lua_log_level</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">null</span>
</pre></div>
</div>
</dd>
<dt>Example</dt>
<dd><p class="first">Increase verbosity</p>
<div class="last highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">lua_log_level</span><span class="p p-Indicator">:</span> <span class="s">&quot;info&quot;</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="describe">
<dt>
<code class="descname">user_map_cmd (String)</code></dt>
<dd><p>the system command used to map authenticated user name to a system user
name</p>
<dl class="docutils">
<dt>Default</dt>
<dd><p class="first">Use <a class="reference internal" href="../ood-auth-map.html#ood-auth-map"><span class="std std-ref">ood_auth_map</span></a> and echo back the authenticated user name as
the system user name</p>
<div class="last highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">user_map_cmd</span><span class="p p-Indicator">:</span> <span class="s">&quot;/opt/ood/ood_auth_map/bin/ood_auth_map.regex&quot;</span>
</pre></div>
</div>
</dd>
<dt>Example</dt>
<dd><p class="first">Capture system user name from regular expression</p>
<div class="last highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">user_map_cmd</span><span class="p p-Indicator">:</span> <span class="s">&quot;/opt/ood/ood_auth_map/bin/ood_auth_map.regex</span><span class="nv"> </span><span class="s">--regex=&#39;^(\\w+)@example.com&#39;&quot;</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="describe">
<dt>
<code class="descname">map_fail_uri (String, null)</code></dt>
<dd><p>the URI a user is redirected to if we fail to map the authenticated user
name to a system user name</p>
<dl class="docutils">
<dt>Default</dt>
<dd><p class="first">Don’t redirect the user and just display an error message</p>
<div class="last highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">map_fail_uri</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">null</span>
</pre></div>
</div>
</dd>
<dt>Example</dt>
<dd><p class="first">Redirect the user to a registration page you set up beforehand</p>
<div class="last highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">map_fail_uri</span><span class="p p-Indicator">:</span> <span class="s">&quot;/register&quot;</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="describe">
<dt>
<code class="descname">pun_stage_cmd (String)</code></dt>
<dd><p>the system command used to launch the <a class="reference internal" href="../nginx-stage.html#nginx-stage"><span class="std std-ref">nginx_stage</span></a> command with
<strong class="program">sudo</strong> privileges</p>
<dl class="docutils">
<dt>Default</dt>
<dd><p class="first">Use default install location</p>
<div class="last highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">pun_stage_cmd</span><span class="p p-Indicator">:</span> <span class="s">&quot;sudo</span><span class="nv"> </span><span class="s">/opt/ood/nginx_stage/sbin/nginx_stage&quot;</span>
</pre></div>
</div>
</dd>
<dt>Example</dt>
<dd><p class="first">Use a different install location</p>
<div class="last highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">pun_stage_cmd</span><span class="p p-Indicator">:</span> <span class="s">&quot;sudo</span><span class="nv"> </span><span class="s">/path/to/nginx_stage&quot;</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="describe">
<dt>
<code class="descname">auth (Array&lt;String&gt;)</code></dt>
<dd><p>the list of Apache directives defining how authentication is handled for
various protected resources on the website</p>
<dl class="docutils">
<dt>Default</dt>
<dd><p class="first">Use basic authentication with a plain-text password file (see
<a class="reference internal" href="examples/default-authentication.html#default-authentication"><span class="std std-ref">Default Authentication</span></a>)</p>
<div class="last highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">auth</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="s">&quot;AuthType</span><span class="nv"> </span><span class="s">Basic&quot;</span>
  <span class="p p-Indicator">-</span> <span class="s">&quot;AuthName</span><span class="nv"> </span><span class="s">\&quot;private\&quot;&quot;</span>
  <span class="p p-Indicator">-</span> <span class="s">&quot;AuthUserFile</span><span class="nv"> </span><span class="s">\&quot;/opt/rh/httpd24/root/etc/httpd/.htpasswd\&quot;&quot;</span>
  <span class="p p-Indicator">-</span> <span class="s">&quot;RequestHeader</span><span class="nv"> </span><span class="s">unset</span><span class="nv"> </span><span class="s">Authorization&quot;</span>
  <span class="p p-Indicator">-</span> <span class="s">&quot;Require</span><span class="nv"> </span><span class="s">valid-user&quot;</span>
</pre></div>
</div>
</dd>
<dt>Example</dt>
<dd><p class="first">See:</p>
<ul class="last simple">
<li><a class="reference internal" href="examples/add-ldap-authentication.html#add-ldap-authentication"><span class="std std-ref">Add LDAP Authentication</span></a></li>
<li><a class="reference internal" href="examples/add-shibboleth-authentication.html#add-shibboleth-authentication"><span class="std std-ref">Add Shibboleth Authentication</span></a></li>
<li><a class="reference internal" href="examples/add-cilogon-authentication.html#add-cilogon-authentication"><span class="std std-ref">Add CILogon Authentication</span></a></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="describe">
<dt>
<code class="descname">root_uri (String)</code></dt>
<dd><p>the URI a user is redirected to when they access the root of the website
(e.g., <code class="docutils literal"><span class="pre">https://www.example.com/</span></code>)</p>
<dl class="docutils">
<dt>Default</dt>
<dd><p class="first">Redirect the user to the <a class="reference internal" href="../../applications/dashboard.html#dashboard"><span class="std std-ref">Dashboard App</span></a></p>
<div class="last highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">root_uri</span><span class="p p-Indicator">:</span> <span class="s">&quot;/pun/sys/dashboard&quot;</span>
</pre></div>
</div>
</dd>
<dt>Example</dt>
<dd><p class="first">Redirect to a different URI</p>
<div class="last highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">root_uri</span><span class="p p-Indicator">:</span> <span class="s">&quot;/my_uri&quot;</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="describe">
<dt>
<code class="descname">analytics (Hash, null)</code></dt>
<dd><p>the object describing how to track server-side analytics with a Google
Analytics account and property</p>
<dl class="docutils">
<dt>Default</dt>
<dd><p class="first">Do not track analytics</p>
<div class="last highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">analytics</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">null</span>
</pre></div>
</div>
</dd>
<dt>Example</dt>
<dd>See <a class="reference internal" href="examples/add-google-analytics.html#add-google-analytics"><span class="std std-ref">Add Google Analytics</span></a></dd>
</dl>
</dd></dl>

</div>
<div class="section" id="configure-public-assets">
<h2>Configure Public Assets<a class="headerlink" href="#configure-public-assets" title="Permalink to this headline">¶</a></h2>
<p>This is a location where files can be served without a user being
authenticated. Useful to serve favicon, images, or user documentation. If
either of these properties are <code class="docutils literal"><span class="pre">null</span></code> then users won’t be able to access
public assets through the website.</p>
<dl class="describe">
<dt>
<code class="descname">public_uri (String, null)</code></dt>
<dd><p>the URI used to access public assets (no authentication needed)</p>
<dl class="docutils">
<dt>Default</dt>
<dd><p class="first">Access as <code class="docutils literal"><span class="pre">http://www.example.com/public</span></code></p>
<div class="last highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">public_uri</span><span class="p p-Indicator">:</span> <span class="s">&quot;/public&quot;</span>
</pre></div>
</div>
</dd>
<dt>Example</dt>
<dd><p class="first">Access under a different URI</p>
<div class="last highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">public_uri</span><span class="p p-Indicator">:</span> <span class="s">&quot;/assets&quot;</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="describe">
<dt>
<code class="descname">public_root (String, null)</code></dt>
<dd><p>the root directory where the public assets are served from</p>
<dl class="docutils">
<dt>Default</dt>
<dd><p class="first">Using a default installation</p>
<div class="last highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">public_root</span><span class="p p-Indicator">:</span> <span class="s">&quot;/var/www/ood/public&quot;</span>
</pre></div>
</div>
</dd>
<dt>Example</dt>
<dd><p class="first">Serve files under a different directory</p>
<div class="last highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">public_root</span><span class="p p-Indicator">:</span> <span class="s">&quot;/path/to/public/files&quot;</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="configure-logout-redirect">
<h2>Configure Logout Redirect<a class="headerlink" href="#configure-logout-redirect" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="../../applications/dashboard.html#dashboard"><span class="std std-ref">Dashboard App</span></a> will send the user to this URI when they click the Logout
button. This URI will then redirect the user to the logout mechanism for your
corresponding authentication mechanism. If either of these properties are
<code class="docutils literal"><span class="pre">null</span></code> then users will get an error when they try to logout from the
<a class="reference internal" href="../../applications/dashboard.html#dashboard"><span class="std std-ref">Dashboard App</span></a>.</p>
<dl class="describe">
<dt>
<code class="descname">logout_uri (String, null)</code></dt>
<dd><p>the URI used to logout from an Apache session</p>
<dl class="docutils">
<dt>Default</dt>
<dd><p class="first">Access as <code class="docutils literal"><span class="pre">http://www.example.com/logout</span></code></p>
<div class="last highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">logout_uri</span><span class="p p-Indicator">:</span> <span class="s">&quot;/logout&quot;</span>
</pre></div>
</div>
</dd>
<dt>Example</dt>
<dd><p class="first">Access under a different URI</p>
<div class="last highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">logout_uri</span><span class="p p-Indicator">:</span> <span class="s">&quot;/log_me_out&quot;</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="describe">
<dt>
<code class="descname">logout_redirect (String, null)</code></dt>
<dd><p>the URI the user is redirected to when accessing the logout URI above</p>
<dl class="docutils">
<dt>Default</dt>
<dd><p class="first">Fallback to the <a class="reference internal" href="../../applications/dashboard.html#dashboard"><span class="std std-ref">Dashboard App</span></a> log out page</p>
<div class="last highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">logout_redirect</span><span class="p p-Indicator">:</span> <span class="s">&quot;/pun/sys/dashboard/logout&quot;</span>
</pre></div>
</div>
</dd>
<dt>Example</dt>
<dd><p class="first">See:</p>
<ul class="last simple">
<li><a class="reference internal" href="examples/add-shibboleth-authentication.html#add-shibboleth-authentication"><span class="std std-ref">Add Shibboleth Authentication</span></a></li>
<li><a class="reference internal" href="examples/add-cilogon-authentication.html#add-cilogon-authentication"><span class="std std-ref">Add CILogon Authentication</span></a></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="configure-reverse-proxy">
<span id="ood-portal-generator-configuration-configure-reverse-proxy"></span><h2>Configure Reverse Proxy<a class="headerlink" href="#configure-reverse-proxy" title="Permalink to this headline">¶</a></h2>
<p>The reverse proxy will proxy a request to any specified host and port through
IP sockets. This is different than what is used for proxying to per-user NGINX
processes through Unix domain sockets. This can be used to connect to Jupyter
notebook servers, RStudio servers, VNC servers, and more… This is disabled by
default as it can be security risk if not properly setup using a good
<code class="docutils literal"><span class="pre">host_regex</span></code>.</p>
<p>A URL request to the <code class="docutils literal"><span class="pre">node_uri</span></code> will reverse proxy to the given <code class="docutils literal"><span class="pre">host</span></code> and
<code class="docutils literal"><span class="pre">port</span></code> using the <strong>full</strong> URI path:</p>
<div class="highlight-sh"><div class="highlight"><pre><span></span>http://www.example.com/&lt;node_uri&gt;/&lt;host&gt;/&lt;port&gt;/...
<span class="c1">#=&gt; http://&lt;host&gt;:&lt;port&gt;/&lt;node_uri&gt;/&lt;host&gt;/&lt;port&gt;/...</span>
</pre></div>
</div>
<p>A URL request to the <code class="docutils literal"><span class="pre">rnode_uri</span></code> will reverse proxy to the given <code class="docutils literal"><span class="pre">host</span></code> and
<code class="docutils literal"><span class="pre">port</span></code> using the <strong>relative</strong> URI path:</p>
<div class="highlight-sh"><div class="highlight"><pre><span></span>http://www.example.com/&lt;rnode_uri&gt;/&lt;host&gt;/&lt;port&gt;/...
<span class="c1">#=&gt; http://&lt;host&gt;:&lt;port&gt;/...</span>
</pre></div>
</div>
<p>Web server apps will have a preference for the format of the URI request they
receive, and this provides two such options. In the case of <code class="docutils literal"><span class="pre">node_uri</span></code> the
developer may have to program the web server to accept requests with a sub-URI
that matches <code class="docutils literal"><span class="pre">/&lt;node_uri&gt;/&lt;host&gt;/&lt;port&gt;</span></code>.</p>
<dl class="describe">
<dt>
<code class="descname">host_regex (String)</code></dt>
<dd><p>the regular expression used as a whitelist for allowing a user to reverse
proxy to a given host</p>
<dl class="docutils">
<dt>Default</dt>
<dd><p class="first">Allow proxying to all hosts in the world (please change this if you
enable this feature)</p>
<div class="last highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">host_regex</span><span class="p p-Indicator">:</span> <span class="s">&quot;[^/]+&quot;</span>
</pre></div>
</div>
</dd>
<dt>Example</dt>
<dd><p class="first">Restrict access to only within internal network</p>
<div class="last highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">host_regex</span><span class="p p-Indicator">:</span> <span class="s">&quot;[\\w.-]+\\.example\\.com&quot;</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="describe">
<dt>
<code class="descname">node_uri (String, null)</code></dt>
<dd><p>the URI used to reverse proxy a user to a server running on a given host
and port that knows the <strong>full</strong> URI path</p>
<dl class="docutils">
<dt>Default</dt>
<dd><p class="first">This feature is disabled by default</p>
<div class="last highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">node_uri</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">null</span>
</pre></div>
</div>
</dd>
<dt>Example</dt>
<dd><p class="first">Use the recommended URI by our team</p>
<div class="last highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">node_uri</span><span class="p p-Indicator">:</span> <span class="s">&quot;/node&quot;</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="describe">
<dt>
<code class="descname">rnode_uri (String, null)</code></dt>
<dd><p>the URI used to reverse proxy a user to a server running on a given host
and port that knows the <strong>relative</strong> URI path</p>
<dl class="docutils">
<dt>Default</dt>
<dd><p class="first">This feature is disabled by default</p>
<div class="last highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">rnode_uri</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">null</span>
</pre></div>
</div>
</dd>
<dt>Example</dt>
<dd><p class="first">Use the recommended URI by our team</p>
<div class="last highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">rnode_uri</span><span class="p p-Indicator">:</span> <span class="s">&quot;/rnode&quot;</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="configure-per-user-nginx">
<h2>Configure per-user NGINX<a class="headerlink" href="#configure-per-user-nginx" title="Permalink to this headline">¶</a></h2>
<p>The reverse proxy will proxy a request under the <code class="docutils literal"><span class="pre">pun_uri</span></code> URI to the user’s
per-user NGINX (PUN) process through Unix domain sockets. It will send process
signals to the user’s PUN through the <code class="docutils literal"><span class="pre">nginx_uri</span></code> URI. If either of these
properties are <code class="docutils literal"><span class="pre">null</span></code> then PUN access will be disabled.</p>
<dl class="describe">
<dt>
<code class="descname">nginx_uri (String, null)</code></dt>
<dd><p>the URI used to control the PUN process</p>
<dl class="docutils">
<dt>Default</dt>
<dd><p class="first">User’s can send signals to PUN through <code class="docutils literal"><span class="pre">http://www.example.com/nginx</span></code></p>
<div class="last highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">nginx_uri</span><span class="p p-Indicator">:</span> <span class="s">&quot;/nginx&quot;</span>
</pre></div>
</div>
</dd>
<dt>Example</dt>
<dd><p class="first">Use a different URI</p>
<div class="last highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">node_uri</span><span class="p p-Indicator">:</span> <span class="s">&quot;/my_pun_controller&quot;</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="describe">
<dt>
<code class="descname">pun_uri (String, null)</code></dt>
<dd><p>the URI used to access the PUN process</p>
<dl class="docutils">
<dt>Default</dt>
<dd><p class="first">User’s access their PUN through <code class="docutils literal"><span class="pre">http://www.example.com/pun</span></code></p>
<div class="last highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">pun_uri</span><span class="p p-Indicator">:</span> <span class="s">&quot;/pun&quot;</span>
</pre></div>
</div>
</dd>
<dt>Example</dt>
<dd><p class="first">Use a different URI</p>
<div class="last highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">pun_uri</span><span class="p p-Indicator">:</span> <span class="s">&quot;/my_pun_apps&quot;</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="describe">
<dt>
<code class="descname">pun_socket_root (String)</code></dt>
<dd><p>the root directory that contains the socket files for the running PUNs</p>
<dl class="docutils">
<dt>Default</dt>
<dd><p class="first">Using a default installation</p>
<div class="last highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">pun_socket_root</span><span class="p p-Indicator">:</span> <span class="s">&quot;/var/run/nginx&quot;</span>
</pre></div>
</div>
</dd>
<dt>Example</dt>
<dd><p class="first">Socket files are located in a different directory</p>
<div class="last highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">pun_socket_root</span><span class="p p-Indicator">:</span> <span class="s">&quot;/path/to/pun/sockets&quot;</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="describe">
<dt>
<code class="descname">pun_max_retries (Integer)</code></dt>
<dd><p>the number of times the proxy attempt to connect to the PUN before giving
up and displaying an error to the user</p>
<dl class="docutils">
<dt>Default</dt>
<dd><p class="first">Only try 5 times</p>
<div class="last highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">pun_max_retries</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">5</span>
</pre></div>
</div>
</dd>
<dt>Example</dt>
<dd><p class="first">Try 25 times</p>
<div class="last highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">pun_max_retries</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">25</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="configure-openid-connect">
<h2>Configure OpenID Connect<a class="headerlink" href="#configure-openid-connect" title="Permalink to this headline">¶</a></h2>
<p>If using OpenID Connect for authentication, these are a few properties you will
need to tweak. For a better understanding of these options you should read more
on <a class="reference external" href="https://github.com/pingidentity/mod_auth_openidc">mod_auth_openidc</a>.</p>
<dl class="describe">
<dt>
<code class="descname">oidc_uri (String, null)</code></dt>
<dd><p>the redirect URI used by <a class="reference external" href="https://github.com/pingidentity/mod_auth_openidc">mod_auth_openidc</a> for authentication</p>
<dl class="docutils">
<dt>Default</dt>
<dd><p class="first">This is disabled by default</p>
<div class="last highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">oidc_uri</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">null</span>
</pre></div>
</div>
</dd>
<dt>Example</dt>
<dd><p class="first">Enable it on a recommended URI</p>
<div class="last highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">oidc_uri</span><span class="p p-Indicator">:</span> <span class="s">&quot;/oidc&quot;</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="describe">
<dt>
<code class="descname">oidc_discover_uri (String, null)</code></dt>
<dd><p>the URI a user is redirected to if they are not authenticated by
<a class="reference external" href="https://github.com/pingidentity/mod_auth_openidc">mod_auth_openidc</a> and is used to discover the ID provider the user will
use to login through</p>
<dl class="docutils">
<dt>Default</dt>
<dd><p class="first">This is disabled by default</p>
<div class="last highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">oidc_discover_uri</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">null</span>
</pre></div>
</div>
</dd>
<dt>Example</dt>
<dd><p class="first">Enable it to a recommended URI</p>
<div class="last highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">oidc_discover_uri</span><span class="p p-Indicator">:</span> <span class="s">&quot;/discover&quot;</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="describe">
<dt>
<code class="descname">oidc_discover_root (String, null)</code></dt>
<dd><p>the root directory on the file system that serves the HTML code used for
the discovery page</p>
<dl class="docutils">
<dt>Default</dt>
<dd><p class="first">This is disabled by default</p>
<div class="last highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">oidc_discover_root</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">null</span>
</pre></div>
</div>
</dd>
<dt>Example</dt>
<dd><p class="first">Enable it to the recommended path</p>
<div class="last highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">oidc_discover_root</span><span class="p p-Indicator">:</span> <span class="s">&quot;/var/www/ood/discover&quot;</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="configure-user-registration">
<h2>Configure User Registration<a class="headerlink" href="#configure-user-registration" title="Permalink to this headline">¶</a></h2>
<p>If you are using a <strong class="program">grid-mapfile</strong> to map the authenticated user name
to a system user name, then this will be used to generate mappings in the file
for a user’s first time accessing your website. Setting either property below
to <code class="docutils literal"><span class="pre">null</span></code> will disable this feature.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This is unnecessary if you use regular expressions for mapping the
authenticated user name to a system user name.</p>
</div>
<dl class="describe">
<dt>
<code class="descname">register_uri (String, null)</code></dt>
<dd><p>the URI a user is redirected to if no mapping exists between an
authenticated user name and a system user name</p>
<dl class="docutils">
<dt>Default</dt>
<dd><p class="first">This is disabled by default. An error is displayed the user if mapping fails.</p>
<div class="last highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">register_uri</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">null</span>
</pre></div>
</div>
</dd>
<dt>Example</dt>
<dd><p class="first">Enable it to a recommended URI</p>
<div class="last highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">register_uri</span><span class="p p-Indicator">:</span> <span class="s">&quot;/register&quot;</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="describe">
<dt>
<code class="descname">register_root (String, null)</code></dt>
<dd><p>the root directory on the file system that serves the HTML code used for
the registration page</p>
<dl class="docutils">
<dt>Default</dt>
<dd><p class="first">This is disabled by default. An error is displayed the user if mapping fails.</p>
<div class="last highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">register_root</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">null</span>
</pre></div>
</div>
</dd>
<dt>Example</dt>
<dd><p class="first">Enable it to the recommended path</p>
<div class="last highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">register_root</span><span class="p p-Indicator">:</span> <span class="s">&quot;/var/www/ood/register&quot;</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="examples.html" class="btn btn-neutral float-right" title="Examples" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="usage.html" class="btn btn-neutral" title="Usage" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Ohio Supercomputer Center.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'develop',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>