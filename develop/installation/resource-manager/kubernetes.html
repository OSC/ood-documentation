

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Kuberenetes &mdash; Open OnDemand 3.0.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/tabs.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Systemd" href="systemd.html" />
    <link rel="prev" title="Cloudy Cluster" href="ccq.html" />
 
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-34776817-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-34776817-3');
</script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html">
          

          
            
            <img src="../../_static/logo.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                3.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../requirements.html">Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../authentication.html">Authentication</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../add-cluster-config.html">Cluster Configuration</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../cluster-config-schema.html">Cluster Config Schema v2</a></li>
<li class="toctree-l2"><a class="reference internal" href="torque.html">Torque</a></li>
<li class="toctree-l2"><a class="reference internal" href="slurm.html">Slurm</a></li>
<li class="toctree-l2"><a class="reference internal" href="lsf.html">LSF</a></li>
<li class="toctree-l2"><a class="reference internal" href="pbspro.html">PBS Professional</a></li>
<li class="toctree-l2"><a class="reference internal" href="sge.html">Grid Engine</a></li>
<li class="toctree-l2"><a class="reference internal" href="linuxhost.html">LinuxHost</a></li>
<li class="toctree-l2"><a class="reference internal" href="ccq.html">Cloudy Cluster</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Kuberenetes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#per-user-kubernetes">Per User Kubernetes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#bootstrapping-the-kuberenetes-cluster">Bootstrapping the Kuberenetes cluster</a></li>
<li class="toctree-l3"><a class="reference internal" href="#bootstrapping-ondemand-web-node-to-communicate-with-kubernetes">Bootstrapping OnDemand web node to communicate with Kubernetes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#deploy-hooks-to-bootstrap-users-kubernetes-configuration">Deploy Hooks to bootstrap users Kubernetes configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#authentication">Authentication</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#managed-authentication">Managed Authentication</a></li>
<li class="toctree-l4"><a class="reference internal" href="#oidc-authentication">OIDC Authentication</a></li>
<li class="toctree-l4"><a class="reference internal" href="#gke-authentication">GKE Authentication</a></li>
<li class="toctree-l4"><a class="reference internal" href="#oidc-audience">OIDC Audience</a></li>
<li class="toctree-l4"><a class="reference internal" href="#oidc-token-exchange">OIDC Token Exchange</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#open-ondemand-apps-in-a-kuberenetes-cluster">Open OnDemand apps in a Kuberenetes cluster</a></li>
<li class="toctree-l3"><a class="reference internal" href="#kyverno-policies">Kyverno Policies</a></li>
<li class="toctree-l3"><a class="reference internal" href="#enforcing-walltimes">Enforcing Walltimes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#using-a-private-image-registry">Using a private image registry</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="systemd.html">Systemd</a></li>
<li class="toctree-l2"><a class="reference internal" href="bin-override-example.html">A Working Example of a <code class="docutils literal notranslate"><span class="pre">bin_overrides</span></code> Script</a></li>
<li class="toctree-l2"><a class="reference internal" href="test.html">Test Configuration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../how-tos/app-development/interactive/setup.html">Setup Interactive Apps</a></li>
</ul>
<p class="caption"><span class="caption-text">How-Tos</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../customizations.html">Customizations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../how-tos/debug.html">Debugging and Monitoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../enable-desktops.html">Enable Interactive Desktop</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../how-tos/app-development.html">App Development</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../install-ihpc-apps.html">Install Other Interactive Apps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/tutorials-interactive-apps.html">Tutorials: Interactive Apps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/tutorials-passenger-apps.html">Tutorials: Passenger Apps</a></li>
</ul>
<p class="caption"><span class="caption-text">More</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference.html">Configuration Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release-notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../version-policy.html">OOD Versioning Policy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../issues/overview.html">OnDemand’s Known Issues</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Open OnDemand</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../add-cluster-config.html">Cluster Configuration</a> &raquo;</li>
        
      <li>Kuberenetes</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/OSC/ood-documentation/blob/develop/source/installation/resource-manager/kubernetes.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="kuberenetes">
<span id="resource-manager-kubernetes"></span><h1>Kuberenetes<a class="headerlink" href="#kuberenetes" title="Permalink to this headline">¶</a></h1>
<p>TODO table of contents</p>
<p>A YAML cluster configuration file for a Kubernetes resource manager on an HPC
cluster looks like:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># /etc/ood/config/clusters.d/my_k8s_cluster.yml</span><span class="w"></span>
<span class="nn">---</span><span class="w"></span>
<span class="nt">v2</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">metadata</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;My</span><span class="nv"> </span><span class="s">K8s</span><span class="nv"> </span><span class="s">Cluster&quot;</span><span class="w"></span>
<span class="w">  </span><span class="c1"># you may not want a login section. There may not be a login node</span><span class="w"></span>
<span class="w">  </span><span class="c1"># for your kuberenetes cluster</span><span class="w"></span>
<span class="w">  </span><span class="nt">login</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;my_k8s_cluster.my_center.edu&quot;</span><span class="w"></span>
<span class="w">  </span><span class="nt">job</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">adapter</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;kubernetes&quot;</span><span class="w"></span>
<span class="w">    </span><span class="nt">config_file</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;~/.kube/config&quot;</span><span class="w"></span>
<span class="w">    </span><span class="nt">cluster</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ood-prod&quot;</span><span class="w"></span>
<span class="w">    </span><span class="nt">context</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ood-prod&quot;</span><span class="w"></span>
<span class="w">    </span><span class="nt">bin</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/usr/bin/kubectl&quot;</span><span class="w"></span>
<span class="w">    </span><span class="nt">username_prefix</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;prod-&quot;</span><span class="w"></span>
<span class="w">    </span><span class="nt">namespace_prefix</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;user-&quot;</span><span class="w"></span>
<span class="w">    </span><span class="nt">all_namespaces</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w"></span>
<span class="w">    </span><span class="nt">auto_supplemental_groups</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w"></span>
<span class="w">    </span><span class="nt">server</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">endpoint</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://my_k8s_cluster.my_center.edu&quot;</span><span class="w"></span>
<span class="w">      </span><span class="nt">cert_authority_file</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/etc/pki/tls/certs/kubernetes-ca.crt&quot;</span><span class="w"></span>
<span class="w">    </span><span class="nt">auth</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;oidc&quot;</span><span class="w"></span>
<span class="w">    </span><span class="nt">mounts</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span><span class="w"></span>
<span class="w">  </span><span class="nt">batch_connect</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">ssh_allow</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w"></span>
</pre></div>
</div>
<dl class="simple">
<dt>adapter</dt><dd><p>This is set to <code class="docutils literal notranslate"><span class="pre">kubernetes</span></code>.</p>
</dd>
<dt>config_file</dt><dd><p>The KUBECONFIG file. <em>Optional</em>. Defaults to ~/.kube/config. Sites can also
set the KUBECONFIG environment varaible, but this configuration has precedence.</p>
</dd>
<dt>cluster</dt><dd><p>The cluster name. Saved to and referenced from your KUBECONFIG.</p>
</dd>
<dt>context</dt><dd><p>The context to use when issuing kubectl commands. <em>Optional</em>. Defaults to cluster
when using OIDC authentication. Saved to and referenced from your KUBECONFIG.</p>
</dd>
<dt>username_prefix</dt><dd><p>The prefix to your users in your KUBECONFIG. Use this prefix to differentiate between
different clusters (like test and production).</p>
</dd>
<dt>namespace_prefix</dt><dd><p>The prefix to your namespace. Use this prefix if you have assertions on what namespaces
are available. I.e., a Kyverno policy that ensures all namespaces are <code class="docutils literal notranslate"><span class="pre">user-\w+</span></code>.</p>
</dd>
<dt>all_namespaces</dt><dd><p>A boolean to determine if the user will query for pods in other namespaces.  When false
users will only query in their namespace. If true they will query and display pods from
all namespaces.</p>
</dd>
<dt>auto_supplemental_groups:</dt><dd><p>Automatically populate a container’s <code class="docutils literal notranslate"><span class="pre">securityContext.supplementalGroups</span></code> with the users
supplemental groups.</p>
</dd>
<dt>server</dt><dd><p>The kubernetes server to communicate with.  This field is a map with <code class="docutils literal notranslate"><span class="pre">endpoint</span></code> and
<code class="docutils literal notranslate"><span class="pre">cert_authority_file</span></code> keys.</p>
</dd>
<dt>auth:</dt><dd><p>See the notes on <a class="reference internal" href="#authentication">Authentication</a> below.</p>
</dd>
<dt>mounts:</dt><dd><p>Site wide mount points for all kubernetes jobs. See the
<a class="reference internal" href="../../tutorials/tutorials-interactive-apps/k8s-jupyter.html#kubernetes-mounts"><span class="std std-ref">documentation on kubernetes mounts</span></a> for more details.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">batch_connect.ssh_allow</span></code> is important to disable OnDemand from rendering links to SSH into your
Kubernetes worker nodes when Batch Connect apps are running.</p>
</div>
<div class="section" id="per-user-kubernetes">
<h2>Per User Kubernetes<a class="headerlink" href="#per-user-kubernetes" title="Permalink to this headline">¶</a></h2>
<p>To get kubernetes to act like a Per User resource there are some conventions
we put in place. Users only schedule pods in their own namespaces
and they always run those pods as themselves.</p>
<p>At most users could be allow to read pods from other namespaces (have sufficient
privileges to run <code class="docutils literal notranslate"><span class="pre">kubectl</span> <span class="pre">get</span> <span class="pre">pods</span> <span class="pre">--all-namespaces</span></code>), but this is not required.
Being able to view pods in other namespaces is only applicable to a feature like
viewing active jobs and seeing pods from other namespaces in that view.</p>
<p>Second is that we specify the <a class="reference external" href="https://kubernetes.io/docs/reference/kubernetes-api/workload-resources/pod-v1/#security-context">Kubernetes security context</a> such that pods have
the same UID and GID as the actual user.</p>
<p>Open OnDemand will always use the users UID and GID as the runAsUser and runAsGroup.
fsGroup is always the same as runAsGroup. runAsNonRoot is always set to true.
supplementalGroups are empty by default. One can automatically populate them with a
cluster configuration above or specify them for each app individually.</p>
<p>You should have policies in place to enforce these.</p>
</div>
<div class="section" id="bootstrapping-the-kuberenetes-cluster">
<h2>Bootstrapping the Kuberenetes cluster<a class="headerlink" href="#bootstrapping-the-kuberenetes-cluster" title="Permalink to this headline">¶</a></h2>
<p>Before anyone can use your Kubernetes cluster from Open OnDemand, you’ll need
to create the <a class="reference external" href="https://github.com/OSC/ondemand/blob/master/hooks/k8s-bootstrap/ondemand.yaml">open ondemand kubernetes resources</a> on your cluster.</p>
<p>Below is an example of adding the necessary resources:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>kubectl apply -f https://raw.githubusercontent.com/OSC/ondemand/master/hooks/k8s-bootstrap/ondemand.yaml
</pre></div>
</div>
</div>
<div class="section" id="bootstrapping-ondemand-web-node-to-communicate-with-kubernetes">
<h2>Bootstrapping OnDemand web node to communicate with Kubernetes<a class="headerlink" href="#bootstrapping-ondemand-web-node-to-communicate-with-kubernetes" title="Permalink to this headline">¶</a></h2>
<p>The OnDemand web node <code class="docutils literal notranslate"><span class="pre">root</span></code> user must be configured
to use the <code class="docutils literal notranslate"><span class="pre">ondemand</span></code> service account deployed by the <a class="reference external" href="https://github.com/OSC/ondemand/blob/master/hooks/k8s-bootstrap/ondemand.yaml">open ondemand kubernetes resources</a> and
be able to execute <code class="docutils literal notranslate"><span class="pre">kubectl</span></code> commands.</p>
<p>First deploy <code class="docutils literal notranslate"><span class="pre">kubectl</span></code> to the OnDemand web node.
Replace <code class="docutils literal notranslate"><span class="pre">$VERSION</span></code> with the version of the Kubernetes controller, eg. <code class="docutils literal notranslate"><span class="pre">1.21.5</span></code>.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>wget -O /usr/local/bin/kubectl https://storage.googleapis.com/kubernetes-release/release/v<span class="nv">$VERSION</span>/bin/linux/amd64/kubectl
chmod +x /usr/local/bin/kubectl
</pre></div>
</div>
<p>Next extract the <code class="docutils literal notranslate"><span class="pre">ondemand</span></code> ServiceAccount token.  Here is an example command to extract
the token using an account that has ClusterAdmin privileges:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nv">TOKEN</span><span class="o">=</span><span class="k">$(</span>kubectl describe serviceaccount ondemand -n ondemand <span class="p">|</span> grep Tokens <span class="p">|</span> awk <span class="s1">&#39;{ print $2 }&#39;</span><span class="k">)</span>
kubectl describe secret <span class="nv">$TOKEN</span> -n ondemand <span class="p">|</span> grep <span class="s2">&quot;token:&quot;</span>
</pre></div>
</div>
<p>Below are example commands to bootstrap the kubeconfig for <code class="docutils literal notranslate"><span class="pre">root</span></code> user on the OnDemand web node
using the token from above.  Run these commands as <code class="docutils literal notranslate"><span class="pre">root</span></code> on the OnDemand web node.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>kubectl config set-cluster kubernetes --server<span class="o">=</span>https://<span class="nv">$CONTROLLER</span>:6443 --certificate-authority<span class="o">=</span><span class="nv">$CACERT</span>
kubectl config set-credentials ondemand@kubernetes --token<span class="o">=</span><span class="nv">$TOKEN</span>
kubectl config set-context ondemand@kubernetes --cluster<span class="o">=</span>kubernetes --user<span class="o">=</span>ondemand@kubernetes
kubectl config use-context ondemand@kubernetes
</pre></div>
</div>
<p>Replace the following values:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">$CONTROLLER</span></code> with the Kubernetes Controller FQDN or IP address</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">$CACERT</span></code> the path to Kubernetes cluster CA cert</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">$TOKEN</span></code> the token for <code class="docutils literal notranslate"><span class="pre">ondemand</span></code> ServiceAccount</p></li>
</ul>
<p>Below is an example of verifying the kubeconfig is valid:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>kubectl cluster-info
</pre></div>
</div>
</div>
<div class="section" id="deploy-hooks-to-bootstrap-users-kubernetes-configuration">
<h2>Deploy Hooks to bootstrap users Kubernetes configuration<a class="headerlink" href="#deploy-hooks-to-bootstrap-users-kubernetes-configuration" title="Permalink to this headline">¶</a></h2>
<p>We ship with <a class="reference external" href="https://github.com/OSC/ondemand/tree/master/hooks">open ondemand provided hooks</a> to bootstrap users when the login
to Open OnDemand. These scripts will create their namespace, a networking policy,
and rolebindings for user and the service accounts in their namespace.</p>
<p>A user <code class="docutils literal notranslate"><span class="pre">oakley</span></code> would create the <code class="docutils literal notranslate"><span class="pre">oakley</span></code> namespace. If you’ve configured
to use prefix <code class="docutils literal notranslate"><span class="pre">user-</span></code>, then the namespace would be <code class="docutils literal notranslate"><span class="pre">user-oakley</span></code>.</p>
<p>The networking policy ensures that pods cannot communicate inbetween namespaces.</p>
<p>The RoleBindings give user, <code class="docutils literal notranslate"><span class="pre">oakley</span></code> in this case, sufficient privileges
to the <code class="docutils literal notranslate"><span class="pre">oakley</span></code> namespace.  Refer to the <a class="reference external" href="https://github.com/OSC/ondemand/blob/master/hooks/k8s-bootstrap/ondemand.yaml">open ondemand kubernetes resources</a>
for details on the roles and privileges created.</p>
<p>You’ll need to employ <a class="reference internal" href="../../reference/files/ood-portal-yml.html#ood-portal-generator-pun-pre-hook"><span class="std std-ref">PUN pre hooks</span></a>
to bootstrap your users to this cluster.</p>
<p>You’ll also have to modify <code class="docutils literal notranslate"><span class="pre">/etc/ood/config/hooks.env</span></code> because <a class="reference external" href="https://github.com/OSC/ondemand/tree/master/hooks">open ondemand provided hooks</a>
require a <code class="docutils literal notranslate"><span class="pre">HOOKENV</span></code> environment variable.</p>
<p>Here’s what you’ll have to edit in the <code class="docutils literal notranslate"><span class="pre">hook.env.example</span></code> file we ship.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># /etc/ood/config/hook.env

# required if you changed the items in the cluster.d file
K8S_USERNAME_PREFIX=&quot;&quot;
NAMESPACE_PREFIX=&quot;&quot;

# required
NETWORK_POLICY_ALLOW_CIDR=&quot;127.0.0.1/32&quot;

# required if you&#39;re using OIDC
IDP_ISSUER_URL=&quot;https://idp.example.com/auth/realms/main/protocol/openid-connect/token&quot;
CLIENT_ID=&quot;changeme&quot;
CLIENT_SECRET=&quot;changeme&quot;

# required if you&#39;re using a secret registry
IMAGE_PULL_SECRET=&quot;&quot;
REGISTRY_DOCKER_CONFIG_JSON=&quot;/some/path/to/docker/config.json&quot;

# enable if are enforcing walltimes through the job pod reaper
# see &#39;Enforcing walltimes&#39; below.
USE_JOB_POD_REAPER=false
</pre></div>
</div>
<p>You can refer to <a class="reference external" href="https://github.com/OSC/osc-ood-config/blob/master/hooks/pre-hook.sh">osc’s prehook</a> but we’ll also provide this example.
As you can see in this pre hook, the username is passed in to the script
which then defines the <code class="docutils literal notranslate"><span class="pre">HOOKENV</span></code> and calls two <a class="reference external" href="https://github.com/OSC/ondemand/tree/master/hooks">open ondemand provided hooks</a>.</p>
<p><code class="docutils literal notranslate"><span class="pre">k8s-bootstrap-ondemand.sh</span></code> boostraps the user in the kubernetes cluster as described
above.</p>
<p>Since we use OIDC at OSC we use <code class="docutils literal notranslate"><span class="pre">set-k8s-creds.sh</span></code> to add or update the user in their
<code class="docutils literal notranslate"><span class="pre">~/.kube/config</span></code> with the relevant OIDC credentials.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="k">for</span> arg <span class="k">in</span> <span class="s2">&quot;</span><span class="nv">$@</span><span class="s2">&quot;</span>
<span class="k">do</span>
  <span class="k">case</span> <span class="nv">$arg</span> <span class="k">in</span>
    --user<span class="o">)</span>
    <span class="nv">ONDEMAND_USERNAME</span><span class="o">=</span><span class="nv">$2</span>
    <span class="nb">shift</span>
    <span class="nb">shift</span>
    <span class="p">;;</span>
<span class="k">esac</span>
<span class="k">done</span>

<span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;x</span><span class="si">${</span><span class="nv">ONDEMAND_USERNAME</span><span class="si">}</span><span class="s2">&quot;</span> <span class="o">=</span> <span class="s2">&quot;x&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
  <span class="nb">echo</span> <span class="s2">&quot;Must specify username&quot;</span>
  <span class="nb">exit</span> <span class="m">1</span>
<span class="k">fi</span>

<span class="nv">HOOKSDIR</span><span class="o">=</span><span class="s2">&quot;/opt/ood/hooks&quot;</span>
<span class="nv">HOOKENV</span><span class="o">=</span><span class="s2">&quot;/etc/ood/config/hook.env&quot;</span>

/bin/bash <span class="s2">&quot;</span><span class="nv">$HOOKSDIR</span><span class="s2">/k8s-bootstrap/k8s-bootstrap-ondemand.sh&quot;</span> <span class="s2">&quot;</span><span class="nv">$ONDEMAND_USERNAME</span><span class="s2">&quot;</span> <span class="s2">&quot;</span><span class="nv">$HOOKENV</span><span class="s2">&quot;</span>
/bin/bash <span class="s2">&quot;</span><span class="nv">$HOOKSDIR</span><span class="s2">/k8s-bootstrap/set-k8s-creds.sh&quot;</span> <span class="s2">&quot;</span><span class="nv">$ONDEMAND_USERNAME</span><span class="s2">&quot;</span> <span class="s2">&quot;</span><span class="nv">$HOOKENV</span><span class="s2">&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="authentication">
<h2>Authentication<a class="headerlink" href="#authentication" title="Permalink to this headline">¶</a></h2>
<p>Here are the current configurations you can list for different types of
authentication.</p>
<div class="section" id="managed-authentication">
<h3>Managed Authentication<a class="headerlink" href="#managed-authentication" title="Permalink to this headline">¶</a></h3>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># /etc/ood/config/clusters.d/my_k8s_cluster.yml</span><span class="w"></span>
<span class="nn">---</span><span class="w"></span>
<span class="nt">v2</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">job</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="c1"># ...</span><span class="w"></span>
<span class="w">    </span><span class="nt">auth</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;managed&#39;</span><span class="w"></span>
</pre></div>
</div>
<p>This is the simplest case and is the default. The authentication
is managed outside of Open OnDemand. We will not <code class="docutils literal notranslate"><span class="pre">set-context</span></code>
or <code class="docutils literal notranslate"><span class="pre">set-cluster</span></code>.</p>
<p>We will pass <code class="docutils literal notranslate"><span class="pre">--context</span></code> to kubectl commands if you have it configured
in the cluster config (above). Otherwise, it’s assumed that the current context
is set out of bounds.</p>
</div>
<div class="section" id="oidc-authentication">
<h3>OIDC Authentication<a class="headerlink" href="#oidc-authentication" title="Permalink to this headline">¶</a></h3>
<p>For OIDC authentication the tokens provided to OnDemand users must be seen as valid for Kubernetes in order for that
token to be used to authenticate with Kubernetes.
First both OnDemand and Kubernetes must be using the same OIDC provider.
In order for the OnDemand token to work with Kubernetes, it’s simplest to
configure an <a class="reference internal" href="#oidc-k8-audience"><span class="std std-ref">audience</span></a> on the OnDemand OIDC client.
An alternative approach would be to update the pre-PUN hooks to perform a <a class="reference internal" href="#oidc-k8-token-exchange"><span class="std std-ref">token exchange</span></a>.
Another approach would be to use the same OIDC client configuration for OnDemand and Kubernetes.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># /etc/ood/config/clusters.d/my_k8s_cluster.yml</span><span class="w"></span>
<span class="nn">---</span><span class="w"></span>
<span class="nt">v2</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">job</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="c1"># ...</span><span class="w"></span>
<span class="w">    </span><span class="nt">auth</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;odic&#39;</span><span class="w"></span>
</pre></div>
</div>
<p>This uses the OIDC credentails that you’ve logged in with.  When
the dashboard starts up it will <code class="docutils literal notranslate"><span class="pre">set-context</span></code> and <code class="docutils literal notranslate"><span class="pre">set-cluster</span></code>
to what you’ve configured.</p>
<p>We will pass <code class="docutils literal notranslate"><span class="pre">--context</span></code> to kubectl commands. This defaults to
the cluster but can be something different if you configure it so.</p>
</div>
<div class="section" id="gke-authentication">
<h3>GKE Authentication<a class="headerlink" href="#gke-authentication" title="Permalink to this headline">¶</a></h3>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># /etc/ood/config/clusters.d/my_k8s_cluster.yml</span><span class="w"></span>
<span class="nn">---</span><span class="w"></span>
<span class="nt">v2</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">job</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="c1"># ...</span><span class="w"></span>
<span class="w">    </span><span class="nt">auth</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;gke&#39;</span><span class="w"></span>
<span class="w">      </span><span class="nt">svc_acct_file</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;~/.gke/my-service-account-file&#39;</span><span class="w"></span>
</pre></div>
</div>
<p>It’s expected that you have a service account that can then manipulate
the cluster you’re interacting with. Every user should have a cooresponding
service account to interact with GKE.</p>
<p>When the dasbhoard starts up, we use <code class="docutils literal notranslate"><span class="pre">gcloud</span></code> to configure your KUBECONFIG.</p>
<p>Google Cloud’s Goolge Kubernetes Engine (GKE) needs some more documentation
on what privileges this serivce account is setup with and how one may bootstrap
it.</p>
</div>
<div class="section" id="oidc-audience">
<span id="oidc-k8-audience"></span><h3>OIDC Audience<a class="headerlink" href="#oidc-audience" title="Permalink to this headline">¶</a></h3>
<p>The simplest way to have the OnDemand OIDC tokens be valid for Kubernetes is to update the OnDemand
client configuration to include the audience of the Kubernetes client.</p>
<div class="section" id="keycloak">
<h4>Keycloak<a class="headerlink" href="#keycloak" title="Permalink to this headline">¶</a></h4>
<p>In the Keycloak web UI, logged in as the admin user:</p>
<ol class="arabic simple">
<li><p>Navigate to <code class="docutils literal notranslate"><span class="pre">Clients</span></code> then choose the OnDemand client.</p></li>
<li><p>Choose the <code class="docutils literal notranslate"><span class="pre">Mappers</span></code> tab and click <code class="docutils literal notranslate"><span class="pre">Create</span></code></p></li>
</ol>
<blockquote>
<div><ol class="arabic simple">
<li><p>Fill in a <code class="docutils literal notranslate"><span class="pre">Name</span></code> and select <code class="docutils literal notranslate"><span class="pre">Audience</span></code> for <code class="docutils literal notranslate"><span class="pre">Mapper</span> <span class="pre">Type</span></code></p></li>
<li><p>For <code class="docutils literal notranslate"><span class="pre">Included</span> <span class="pre">Client</span> <span class="pre">Audience</span></code> choose the Kubernetes client entry</p></li>
<li><p>Turn on both <code class="docutils literal notranslate"><span class="pre">Add</span> <span class="pre">to</span> <span class="pre">ID</span> <span class="pre">token</span></code> and <code class="docutils literal notranslate"><span class="pre">Add</span> <span class="pre">to</span> <span class="pre">access</span> <span class="pre">token</span></code></p></li>
</ol>
</div></blockquote>
</div>
</div>
<div class="section" id="oidc-token-exchange">
<span id="oidc-k8-token-exchange"></span><h3>OIDC Token Exchange<a class="headerlink" href="#oidc-token-exchange" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id1">
<h4>Keycloak<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<p>Refer to the <a class="reference external" href="https://www.keycloak.org/docs/latest/securing_apps/#_token-exchange">Keycloak token exchange documentation</a></p>
</div>
</div>
</div>
<div class="section" id="open-ondemand-apps-in-a-kuberenetes-cluster">
<h2>Open OnDemand apps in a Kuberenetes cluster<a class="headerlink" href="#open-ondemand-apps-in-a-kuberenetes-cluster" title="Permalink to this headline">¶</a></h2>
<p>Kuberenetes is so different from other HPC clusters that the interface we have for
other schedulers didn’t quite fit.  So Open OnDemand apps developed for kubernetes
clusters look quite different from other schedulers.  Essentially most things we’ll
need are packed into the <code class="docutils literal notranslate"><span class="pre">native</span></code> key of the <code class="docutils literal notranslate"><span class="pre">submit.yml.erb</span></code> files.</p>
<p>See the <a class="reference internal" href="../../tutorials/tutorials-interactive-apps/k8s-like-hpc-jupyter.html#app-development-tutorials-interactive-apps-k8s-like-hpc-jupyter"><span class="std std-ref">tutorial for a kubernetes app that behaves like HPC compute</span></a> as well as
the <a class="reference internal" href="../../tutorials/tutorials-interactive-apps/k8s-jupyter.html#app-development-tutorials-interactive-apps-k8s-jupyter"><span class="std std-ref">tutorial for a kubernetes app</span></a>
for more details.</p>
</div>
<div class="section" id="kyverno-policies">
<h2>Kyverno Policies<a class="headerlink" href="#kyverno-policies" title="Permalink to this headline">¶</a></h2>
<p>Once Kubernetes is available to OnDemand, it’s possible for users to use <code class="docutils literal notranslate"><span class="pre">kubectl</span></code> to submit arbirary pods to
Kubernetes. To ensure proper security with Kubernetes a policy engine such as <a class="reference external" href="https://kyverno.io">Kyverno</a> can be used to ensure certain
security standards.</p>
<p>For OnDemand, many of the <a class="reference external" href="https://github.com/kyverno/kyverno/tree/main/charts/kyverno-policies/templates">Kyverno baseline and restricted sescurity policies</a> will work.  There are also policies that
can be deployed to ensure the UID/GID of user pods match that user’s UID/GID on the HPC clusters.
Some <a class="reference external" href="https://github.com/OSC/osc-helm-charts/tree/main/charts/kyverno-policies/templates">example policies</a> do things such as enforce UID/GID and other security standards for OnDemand.
These policies rely heavily on the fact that OnDemand usage in Kubernetes using a namespace prefix.</p>
<p>The policies enforcing UID/GID and supplemental groups are using data supplied by
the <a class="reference external" href="https://github.com/OSC/k8-ldap-configmap">k8-ldap-configmap</a> tool that generates ConfigMap resources based on LDAP data.
This tool runs as a deployment inside the Kubernetes cluster.</p>
</div>
<div class="section" id="enforcing-walltimes">
<h2>Enforcing Walltimes<a class="headerlink" href="#enforcing-walltimes" title="Permalink to this headline">¶</a></h2>
<p>In order to enforce that OnDemand pods are shut down after so much time, it’s necessary to deploy a service that can
cleanup pods that have run past their walltime.  Also because OnDemand is bootstrapping
a namespace per user it’s useful to cleanup unused namespaces.</p>
<p>The OnDemand pods will have the <code class="docutils literal notranslate"><span class="pre">pod.kubernetes.io/lifetime</span></code> annotation set that
is read by <a class="reference external" href="https://github.com/OSC/job-pod-reaper">job-pod-reaper</a> that will kill pods that have reached their walltime.
The <a class="reference external" href="https://github.com/OSC/job-pod-reaper">job-pod-reaper</a> service runs as a Deployment inside Kubernetes and will kill
any pods based on the lifetime annotation.
Below is an example of Helm values that can be used to configure job-pod-reaper for OnDemand:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">reapNamespaces</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w"></span>
<span class="nt">namespaceLabels</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">app.kubernetes.io/name=open-ondemand</span><span class="w"></span>
<span class="nt">objectLabels</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">app.kubernetes.io/managed-by=open-ondemand</span><span class="w"></span>
</pre></div>
</div>
<p>You will need to tell OnDemand you are using <a class="reference external" href="https://github.com/OSC/job-pod-reaper">job-pod-reaper</a> and to bootstrap the necessary RoleBinding so that
job-pod-reaper can delete OnDemand pods. Update <code class="docutils literal notranslate"><span class="pre">/etc/ood/config/hooks.env</span></code> to include the following configuration:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nv">USE_JOB_POD_REAPER</span><span class="o">=</span><span class="s2">&quot;true&quot;</span>
</pre></div>
</div>
<p>In order to cleanup unused namespaces the <a class="reference external" href="https://github.com/OSC/k8-namespace-reaper">k8-namespace-reaper</a> tool can be used.
This tool will delete a namespace based on several factors:</p>
<ul class="simple">
<li><p>The creation timestamp of the namespace</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">openondemand.org/last-hook-execution</span></code> annotation set by the OnDemand pre-PUN hook</p></li>
<li><p>The last pod to run in that namespace based on Prometheus metrics</p></li>
</ul>
<p>Below is an example of Helm values to deploy this tool for OnDemand where the OnDemand namespaces have <code class="docutils literal notranslate"><span class="pre">user-</span></code> prefix:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">config</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">namespaceLabels</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">app.kubernetes.io/name=open-ondemand</span><span class="w"></span>
<span class="w">  </span><span class="nt">namespaceRegexp</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">user-.+</span><span class="w"></span>
<span class="w">  </span><span class="nt">namespaceLastUsedAnnotation</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">openondemand.org/last-hook-execution</span><span class="w"></span>
<span class="w">  </span><span class="nt">prometheusAddress</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http://prometheus.prometheus:9090</span><span class="w"></span>
<span class="w">  </span><span class="nt">reapAfter</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8h</span><span class="w"></span>
<span class="w">  </span><span class="nt">lastUsedThreshold</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4h</span><span class="w"></span>
<span class="w">  </span><span class="nt">interval</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2h</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="using-a-private-image-registry">
<h2>Using a private image registry<a class="headerlink" href="#using-a-private-image-registry" title="Permalink to this headline">¶</a></h2>
<p>OnDemand’s Kubernetes integration can be setup to pull images from a private registry
like <a class="reference external" href="https://goharbor.io/">Harbor</a>.</p>
<p>In order to pull images from a private registry that requires authentication,
OnDemand can be configured to setup <a class="reference external" href="https://kubernetes.io/docs/tasks/configure-pod-container/pull-image-private-registry/">Image Pull Secrets</a>.
The OnDemand web node will need a JSON file setup that includes the username and password of a registry user authorized
to pull images used by OnDemand apps.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Once the OnDemand user’s namespace is given the registry auth secret, it will be readable by the user.
It’s recommended to use a read-only auth token that has limited to access just images used by OnDemand.</p>
</div>
<p>In the following example you can set the following values:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">$REGISTRY</span></code> the registry address.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">$REGISTRY_USER</span></code> the username of the user authorized to pull the images</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">$REGISTRY_PASSWORD</span></code> the password of the user authorized to pull the images</p></li>
</ul>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nv">AUTH</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> -n <span class="s2">&quot;</span><span class="si">${</span><span class="nv">REGISTRY_USER</span><span class="si">}</span><span class="s2">:</span><span class="si">${</span><span class="nv">REGISTRY_PASSWORD</span><span class="si">}</span><span class="s2">&quot;</span> <span class="p">|</span> base64<span class="k">)</span>
cat &gt; /etc/ood/config/image-registry.json <span class="s">&lt;&lt;EOF</span>
<span class="s">{</span>
<span class="s">  &quot;auths&quot;: {</span>
<span class="s">    &quot;${REGISTRY}&quot;: {</span>
<span class="s">      &quot;auth&quot;: &quot;${AUTH}&quot;</span>
<span class="s">    }</span>
<span class="s">  }</span>
<span class="s">}</span>
<span class="s">EOF</span>
chmod <span class="m">0600</span> /etc/ood/config/image-registry.json
</pre></div>
</div>
<p>Once the registry JSON is created you must configure <code class="docutils literal notranslate"><span class="pre">/etc/ood/config/hooks.env</span></code> so OnDemand knows how to bootstrap
a user’s namespaces with the ability to pull from this registry:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nv">IMAGE_PULL_SECRET</span><span class="o">=</span><span class="s2">&quot;private-docker-registry&quot;</span>
<span class="nv">REGISTRY_DOCKER_CONFIG_JSON</span><span class="o">=</span><span class="s2">&quot;/etc/ood/config/image-registry.json&quot;</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="systemd.html" class="btn btn-neutral float-right" title="Systemd" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="ccq.html" class="btn btn-neutral float-left" title="Cloudy Cluster" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017-2023, Ohio Supercomputer Center

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Documentation Versions</span>
    v: 
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Versions</dt>
      
        <dd><a href="https://OSC.github.io/ood-documentation/latest/installation/resource-manager/kubernetes.html">latest</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-2.0/installation/resource-manager/kubernetes.html">2.0</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.8/installation/resource-manager/kubernetes.html">1.8</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.7/installation/resource-manager/kubernetes.html">1.7</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.6/installation/resource-manager/kubernetes.html">1.6</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.5/installation/resource-manager/kubernetes.html">1.5</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.4/installation/resource-manager/kubernetes.html">1.4</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.3/installation/resource-manager/kubernetes.html">1.3</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.2/installation/resource-manager/kubernetes.html">1.2</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.1/installation/resource-manager/kubernetes.html">1.1</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.0/installation/resource-manager/kubernetes.html">1.0</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/develop/installation/resource-manager/kubernetes.html">develop</a></dd>
      
    </dl>
    <dl>
      <dt>On GitHub</dt>
        <dd>
          <a href="http://openondemand.org/">Website</a>
        </dd>
        <dd>
          <a href="https://github.com/OSC/Open-OnDemand">Main Repo</a>
        </dd>
    </dl>
    <hr/>
    Theme provided by <a href="http://www.readthedocs.org">Read the Docs</a>.
  </div>
</div>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>