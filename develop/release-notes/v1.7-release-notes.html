

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>v1.7 Release Notes &mdash; Open OnDemand 3.1.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
  <link rel="stylesheet" href="../_static/tabs.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="v1.6 Release Notes" href="v1.6-release-notes.html" />
    <link rel="prev" title="v1.8 Release Notes" href="v1.8-release-notes.html" />
 
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-34776817-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-34776817-3');
</script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/logo.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                3.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../requirements.html">Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation/add-cluster-config.html">Cluster Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../how-tos/app-development/interactive/setup.html">Setup Interactive Apps</a></li>
</ul>
<p class="caption"><span class="caption-text">How-Tos</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../customizations.html">Customizations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../how-tos/debug.html">Debugging and Monitoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="../enable-desktops.html">Enable Interactive Desktop</a></li>
<li class="toctree-l1"><a class="reference internal" href="../how-tos/app-development.html">App Development</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../install-ihpc-apps.html">Install Other Interactive Apps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/tutorials-interactive-apps.html">Tutorials: Interactive Apps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/tutorials-passenger-apps.html">Tutorials: Passenger Apps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/tutorials-dashboard-apps.html">Developing The OOD Dashboard</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference.html">Configuration Reference</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../release-notes.html">Release Notes</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="v3.1-release-notes.html">v3.1 Release Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="v3.0-release-notes.html">v3.0 Release Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="v2.0-release-notes.html">v2.0 Release Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.8-release-notes.html">v1.8 Release Notes</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">v1.7 Release Notes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#special-thanks">Special thanks</a></li>
<li class="toctree-l3"><a class="reference internal" href="#upgrading-from-v1-6">Upgrading from v1.6</a></li>
<li class="toctree-l3"><a class="reference internal" href="#upgrading-from-v1-5">Upgrading from v1.5</a></li>
<li class="toctree-l3"><a class="reference internal" href="#details">Details</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#support-running-ondemand-with-selinux">Support running OnDemand with SELinux</a></li>
<li class="toctree-l4"><a class="reference internal" href="#update-project-dependencies">Update project dependencies</a></li>
<li class="toctree-l4"><a class="reference internal" href="#drop-el6-and-add-el8-support">Drop EL6 and add EL8 support</a></li>
<li class="toctree-l4"><a class="reference internal" href="#added-the-linux-host-adapter">Added the Linux Host Adapter</a></li>
<li class="toctree-l4"><a class="reference internal" href="#show-account-balance-warnings">Show account balance warnings</a></li>
<li class="toctree-l4"><a class="reference internal" href="#job-composer-and-active-jobs-match-dashboard-branding">Job Composer and Active Jobs match Dashboard Branding</a></li>
<li class="toctree-l4"><a class="reference internal" href="#maintenance-mode">Maintenance mode</a></li>
<li class="toctree-l4"><a class="reference internal" href="#titles-for-files-menu-entries">Titles for Files menu entries</a></li>
<li class="toctree-l4"><a class="reference internal" href="#documentation-for-keycloak-as-identity-broker-with-cilogon-and-keycloak-with-duo-2fa">Documentation for Keycloak as identity broker with CILogon and Keycloak with Duo 2FA</a></li>
<li class="toctree-l4"><a class="reference internal" href="#add-grafana-support-for-activejobs-app">Add Grafana support for ActiveJobs app</a></li>
<li class="toctree-l4"><a class="reference internal" href="#improvements-to-ood-portal-generator">Improvements to ood-portal-generator</a></li>
<li class="toctree-l4"><a class="reference internal" href="#add-an-ssh-wrapper-to-the-shell-app">Add an ssh wrapper to the shell app</a></li>
<li class="toctree-l4"><a class="reference internal" href="#regenerate-ood-portal-conf-with-every-apache-restart">Regenerate ood-portal.conf with every apache restart</a></li>
<li class="toctree-l4"><a class="reference internal" href="#support-sanitizing-job-names">Support sanitizing job names</a></li>
<li class="toctree-l4"><a class="reference internal" href="#nginx-clean-support-for-a-specific-user">nginx_clean support for a specific user</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dashboard-now-alerts-on-malformed-cluster-configs">Dashboard now alerts on malformed cluster configs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#job-composer-now-shows-suggested-scripts">Job composer now shows suggested scripts</a></li>
<li class="toctree-l4"><a class="reference internal" href="#add-ability-to-disable-ssh-to-compute-node-link-in-batch-connect-session-card">Add ability to disable SSH to compute node link in batch connect session card</a></li>
<li class="toctree-l4"><a class="reference internal" href="#reduced-installation-size-by-30-percent">Reduced installation size by 30 percent</a></li>
<li class="toctree-l4"><a class="reference internal" href="#new-shared-ondemand-gem-sets">New shared OnDemand gem sets</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="v1.6-release-notes.html">v1.6 Release Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.5-release-notes.html">v1.5 Release Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.4-release-notes.html">v1.4 Release Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.3-release-notes.html">v1.3 Release Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.2-release-notes.html">v1.2 Release Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.1-release-notes.html">v1.1 Release Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.0-release-notes.html">v1.0 Release Notes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../version-policy.html">Versioning Policy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../issues/overview.html">OnDemand’s Known Issues</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Open OnDemand</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../release-notes.html">Release Notes</a> &raquo;</li>
        
      <li>v1.7 Release Notes</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/OSC/ood-documentation/blob/develop/source/release-notes/v1.7-release-notes.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="v1-7-release-notes">
<span id="id1"></span><h1>v1.7 Release Notes<a class="headerlink" href="#v1-7-release-notes" title="Permalink to this headline">¶</a></h1>
<p>Highlights in 1.7:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#support-running-ondemand-with-selinux">Support running OnDemand with SELinux</a></p></li>
<li><p><a class="reference internal" href="#update-project-dependencies">Update project dependencies</a></p></li>
<li><p><a class="reference internal" href="#drop-el6-and-add-el8-support">Drop EL6 and add EL8 support</a></p></li>
<li><p><a class="reference internal" href="#added-the-linux-host-adapter">Added the Linux Host Adapter</a></p></li>
<li><p><a class="reference internal" href="#show-account-balance-warnings">Show account balance warnings</a></p></li>
<li><p><a class="reference internal" href="#job-composer-and-active-jobs-match-dashboard-branding">Job Composer and Active Jobs match Dashboard Branding</a></p></li>
<li><p><a class="reference internal" href="#titles-for-files-menu-entries">Titles for Files menu entries</a></p></li>
<li><p><a class="reference internal" href="#documentation-for-keycloak-as-identity-broker-with-cilogon-and-keycloak-with-duo-2fa">Documentation for Keycloak as identity broker with CILogon and Keycloak with Duo 2FA</a></p></li>
<li><p><a class="reference internal" href="#add-grafana-support-for-activejobs-app">Add Grafana support for ActiveJobs app</a></p></li>
<li><p><a class="reference internal" href="#improvements-to-ood-portal-generator">Improvements to ood-portal-generator</a></p></li>
<li><p><a class="reference internal" href="#add-an-ssh-wrapper-to-the-shell-app">Add an ssh wrapper to the shell app</a></p></li>
<li><p><a class="reference internal" href="#regenerate-ood-portal-conf-with-every-apache-restart">Regenerate ood-portal.conf with every apache restart</a></p></li>
<li><p><a class="reference internal" href="#support-sanitizing-job-names">Support sanitizing job names</a></p></li>
<li><p><a class="reference internal" href="#nginx-clean-support-for-a-specific-user">nginx_clean support for a specific user</a></p></li>
<li><p><a class="reference internal" href="#dashboard-now-alerts-on-malformed-cluster-configs">Dashboard now alerts on malformed cluster configs</a></p></li>
<li><p><a class="reference internal" href="#job-composer-now-shows-suggested-scripts">Job composer now shows suggested scripts</a></p></li>
<li><p><a class="reference internal" href="#add-ability-to-disable-ssh-to-compute-node-link-in-batch-connect-session-card">Add ability to disable SSH to compute node link in batch connect session card</a></p></li>
<li><p><a class="reference internal" href="#reduced-installation-size-by-30-percent">Reduced installation size by 30 percent</a></p></li>
<li><p><a class="reference internal" href="#new-shared-ondemand-gem-sets">New shared OnDemand gem sets</a></p></li>
</ul>
<div class="section" id="special-thanks">
<h2>Special thanks<a class="headerlink" href="#special-thanks" title="Permalink to this headline">¶</a></h2>
<p>Special thanks to these contributors (alpha by first name):</p>
<ul class="simple">
<li><p>Bart Verheyde <a class="reference external" href="https://github.com/baverhey">&#64;baverhey</a></p></li>
<li><p>Guilherme Maluf Balzana <a class="reference external" href="https://github.com/guimaluf">&#64;guimaluf</a></p></li>
<li><p>Jason Buechler <a class="reference external" href="https://github.com/jasonbuechler">&#64;jasonbuechler</a></p></li>
<li><p>Shawn Rice <a class="reference external" href="https://github.com/zooley">&#64;zooley</a></p></li>
</ul>
<p><em>If you contributed to the 1.7 OnDemand release and you are not on the core team and your name is not listed here please let us know and we will add you.</em></p>
</div>
<div class="section" id="upgrading-from-v1-6">
<h2>Upgrading from v1.6<a class="headerlink" href="#upgrading-from-v1-6" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>In v1.7 support for CentOS/RedHat 6 has been dropped</p>
</div>
<p>Before upgrading to v1.7, please consider the following:</p>
<ul class="simple">
<li><p>If upgrading from OnDemand 1.3.x or older <strong>you must upgrade to 1.6.x before upgrading to 1.7</strong>. See directions for upgrading from 1.4 to 1.5 (<a class="reference internal" href="v1.5-release-notes.html#v1-5-release-notes"><span class="std std-ref">v1.5 Release Notes</span></a>) and from 1.5 to 1.6 (<a class="reference internal" href="v1.6-release-notes.html#v1-6-release-notes"><span class="std std-ref">v1.6 Release Notes</span></a>).</p></li>
<li><p>As always please update the <em>development</em> or <em>test</em> instances of OnDemand installed at your center first to test and verify before you modify the <em>production</em> instance.</p></li>
<li><p>All running PUNs must be restarted after the upgrade due to upgrading to new versions of Passenger and Ruby. It’s recommended to schedule an short outage of your OnDemand instance to perform this upgrade.</p></li>
</ul>
<ol class="arabic">
<li><p>Update OnDemand release RPM</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo yum install -y https://yum.osc.edu/ondemand/1.7/ondemand-release-web-1.7-1.noarch.rpm
</pre></div>
</div>
</li>
<li><p>Update OnDemand</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo yum clean all
sudo yum update ondemand
</pre></div>
</div>
</li>
<li><p>Update Apache configuration and restart Apache.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo /opt/ood/ood-portal-generator/sbin/update_ood_portal --force
sudo systemctl try-restart httpd24-httpd.service httpd24-htcacheclean.service
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Due to changes with <code class="docutils literal notranslate"><span class="pre">ood-portal-generator</span></code> it is necessary to run
<code class="docutils literal notranslate"><span class="pre">update_ood_portal</span></code> with <code class="docutils literal notranslate"><span class="pre">--force</span></code> flag after upgrading to OnDemand
1.7. The RPM upgrade will generate
<code class="docutils literal notranslate"><span class="pre">/opt/rh/httpd24/root/etc/httpd/conf.d/ood-portal.conf.new</span></code>. If there
are custom manual changes made to
<code class="docutils literal notranslate"><span class="pre">/opt/rh/httpd24/root/etc/httpd/conf.d/ood-portal.conf</span></code> it will be
necessary to merge those changes in after running <code class="docutils literal notranslate"><span class="pre">update_ood_portal</span>
<span class="pre">--force</span></code>.</p>
</div>
</li>
<li><p>Force all PUNs to restart</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo /opt/ood/nginx_stage/sbin/nginx_stage nginx_clean -f
</pre></div>
</div>
</li>
<li><p>Optionally remove old dependencies from prior versions of OOD if they are not used by other applications.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo yum remove rh-ruby24<span class="se">\*</span> rh-nodejs6<span class="se">\*</span> rh-git29<span class="se">\*</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="upgrading-from-v1-5">
<h2>Upgrading from v1.5<a class="headerlink" href="#upgrading-from-v1-5" title="Permalink to this headline">¶</a></h2>
<p>Follow the directions for upgrading to v1.6 first (<a class="reference internal" href="v1.6-release-notes.html#v1-6-release-notes"><span class="std std-ref">v1.6 Release Notes</span></a>). After the upgrade is complete and working, follow the directions above.</p>
</div>
<div class="section" id="details">
<h2>Details<a class="headerlink" href="#details" title="Permalink to this headline">¶</a></h2>
<div class="section" id="support-running-ondemand-with-selinux">
<h3>Support running OnDemand with SELinux<a class="headerlink" href="#support-running-ondemand-with-selinux" title="Permalink to this headline">¶</a></h3>
<p>Beta support for running OnDemand with SELinux has been added. Support is enabled by installing the <code class="docutils literal notranslate"><span class="pre">ondemand-selinux</span></code> package. For details see <a class="reference internal" href="../installation/modify-system-security.html#ood-selinux"><span class="std std-ref">SELinux</span></a></p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If the <code class="docutils literal notranslate"><span class="pre">ondemand-selinux</span></code> package was installed from the OnDemand 1.6 release there are several changes that must be addressed manually.  Several SELinux booleans were enabled by the <code class="docutils literal notranslate"><span class="pre">ondemand-selinux</span></code> package and are no longer needed by OnDemand. The following SELinux booleans can be disabled if not used outside OnDemand:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo setsebool -P <span class="nv">httpd_execmem</span><span class="o">=</span>off
sudo setsebool -P <span class="nv">httpd_unified</span><span class="o">=</span>off
sudo setsebool -P <span class="nv">httpd_enable_homedirs</span><span class="o">=</span>off
sudo setsebool -P <span class="nv">httpd_read_user_content</span><span class="o">=</span>off
</pre></div>
</div>
</div>
</div>
<div class="section" id="update-project-dependencies">
<h3>Update project dependencies<a class="headerlink" href="#update-project-dependencies" title="Permalink to this headline">¶</a></h3>
<table class="docutils align-default" id="id4">
<caption><span class="caption-number">Table 11 </span><span class="caption-text">Project Dependencies</span><a class="headerlink" href="#id4" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Dependency</p></th>
<th class="head"><p>Old Version</p></th>
<th class="head"><p>New Version</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Passenger</p></td>
<td><p>5.3.7</p></td>
<td><p>6.0.4</p></td>
</tr>
<tr class="row-odd"><td><p>NGINX</p></td>
<td><p>1.14.0</p></td>
<td><p>1.17.3</p></td>
</tr>
<tr class="row-even"><td><p>Ruby</p></td>
<td><p>2.4</p></td>
<td><p>2.5</p></td>
</tr>
<tr class="row-odd"><td><p>NodeJS</p></td>
<td><p>6</p></td>
<td><p>10</p></td>
</tr>
<tr class="row-even"><td><p>Rails</p></td>
<td><p>4.2</p></td>
<td><p>5.2</p></td>
</tr>
<tr class="row-odd"><td><p>noVNC</p></td>
<td><p>1.0.0</p></td>
<td><p>1.1.0</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="drop-el6-and-add-el8-support">
<h3>Drop EL6 and add EL8 support<a class="headerlink" href="#drop-el6-and-add-el8-support" title="Permalink to this headline">¶</a></h3>
<p>OnDemand has dropped support for CentOS/RedHat 6 and added support for CentOS/RedHat 8.</p>
</div>
<div class="section" id="added-the-linux-host-adapter">
<h3>Added the Linux Host Adapter<a class="headerlink" href="#added-the-linux-host-adapter" title="Permalink to this headline">¶</a></h3>
<p>Support for running jobs directly on Linux hosts has been added. This means interactive
jobs can now run on a login node instead of through a batch scheduler.</p>
<p>See the documentation for the <a class="reference internal" href="../installation/resource-manager/linuxhost.html#resource-manager-linuxhost"><span class="std std-ref">LinuxHost</span></a>. for more details.</p>
</div>
<div class="section" id="show-account-balance-warnings">
<h3>Show account balance warnings<a class="headerlink" href="#show-account-balance-warnings" title="Permalink to this headline">¶</a></h3>
<p>The dashboard can now show account balance warnings if the users’ account balance
is some threshold.</p>
<p>See <a class="reference internal" href="../customizations.html#balance-warnings-on-dashboard"><span class="std std-ref">these docs</span></a> for more details on how to
enable this feature.</p>
</div>
<div class="section" id="job-composer-and-active-jobs-match-dashboard-branding">
<h3>Job Composer and Active Jobs match Dashboard Branding<a class="headerlink" href="#job-composer-and-active-jobs-match-dashboard-branding" title="Permalink to this headline">¶</a></h3>
<p>The Job Composer and Active Jobs apps’ top navigation bar now share the same branding
scheme configured for the dashboard.</p>
<p>There’s no additional configuration required for this other than what’s documented
<a class="reference internal" href="../customizations.html#id2"><span class="std std-ref">here</span></a>.</p>
<p>Special thanks to <a class="reference external" href="https://github.com/zooley">&#64;zooley</a> (Shawn Rice) for implementing this feature!</p>
</div>
<div class="section" id="maintenance-mode">
<h3>Maintenance mode<a class="headerlink" href="#maintenance-mode" title="Permalink to this headline">¶</a></h3>
<p>OOD can be put into ‘maintenance mode’ where it serves a static page to either all
users or a subset (staff on a VPN for example).  This static page informs users
that maintenance is underway while administrators perform disruptive tasks.</p>
<p>See <a class="reference internal" href="../customizations.html#maintenance-mode"><span class="std std-ref">these docs</span></a> on how to configure and enable this feature.</p>
</div>
<div class="section" id="titles-for-files-menu-entries">
<h3>Titles for Files menu entries<a class="headerlink" href="#titles-for-files-menu-entries" title="Permalink to this headline">¶</a></h3>
<p>The shortcuts in the files dropdown menu can now show an optional title along with the
directory path. The <a class="reference internal" href="../customizations.html#add-shortcuts-to-files-menu"><span class="std std-ref">original documentation</span></a> on this
feature has been updated to reflect the new options.</p>
</div>
<div class="section" id="documentation-for-keycloak-as-identity-broker-with-cilogon-and-keycloak-with-duo-2fa">
<h3>Documentation for Keycloak as identity broker with CILogon and Keycloak with Duo 2FA<a class="headerlink" href="#documentation-for-keycloak-as-identity-broker-with-cilogon-and-keycloak-with-duo-2fa" title="Permalink to this headline">¶</a></h3>
<p>Documentation for Keycloak as identity broker with CILogon has been added in the documentation
entitled ‘<a class="reference internal" href="../authentication/tutorial-oidc-keycloak-rhel7/configure-cilogon.html#authentication-tutorial-oidc-keycloak-rhel7-configure-cilogon"><span class="std std-ref">Configure Keycloak with CILogon</span></a>’.</p>
<p>Documentation for Keycloak with Duo two factor authentication has been updated in the documentation
entitled ‘<a class="reference internal" href="../authentication/duo-2fa-with-keycloak.html#authentication-duo-2fa-with-keycloak"><span class="std std-ref">Two Factor Auth using Duo with Keycloak</span></a>’.</p>
</div>
<div class="section" id="add-grafana-support-for-activejobs-app">
<h3>Add Grafana support for ActiveJobs app<a class="headerlink" href="#add-grafana-support-for-activejobs-app" title="Permalink to this headline">¶</a></h3>
<p>OnDemand’s ActiveJobs app can display graphs for jobs that are pulled from Grafana.
Details on how to configure Grafana support are in <a class="reference internal" href="../customizations.html#grafana-support"><span class="std std-ref">these docs</span></a>.</p>
</div>
<div class="section" id="improvements-to-ood-portal-generator">
<h3>Improvements to ood-portal-generator<a class="headerlink" href="#improvements-to-ood-portal-generator" title="Permalink to this headline">¶</a></h3>
<p>The ood-portal-generator app has been rewritten in Ruby and extensive testing added.
Checksums generated for <code class="docutils literal notranslate"><span class="pre">ood-portal.conf</span></code> now exclude comments.</p>
</div>
<div class="section" id="add-an-ssh-wrapper-to-the-shell-app">
<h3>Add an ssh wrapper to the shell app<a class="headerlink" href="#add-an-ssh-wrapper-to-the-shell-app" title="Permalink to this headline">¶</a></h3>
<p>An ssh wrapper script can now be used instead of just the <code class="docutils literal notranslate"><span class="pre">ssh</span></code> command in the
shell app.  See how to configure this <a class="reference internal" href="../customizations.html#ssh-wrapper"><span class="std std-ref">here</span></a>.</p>
<p>Special thanks to <a class="reference external" href="https://github.com/baverhey">&#64;baverhey</a> (Bart Verheyde) for implementing this feature!</p>
</div>
<div class="section" id="regenerate-ood-portal-conf-with-every-apache-restart">
<h3>Regenerate ood-portal.conf with every apache restart<a class="headerlink" href="#regenerate-ood-portal-conf-with-every-apache-restart" title="Permalink to this headline">¶</a></h3>
<p>Systemd will now regenerate the ood-portal.conf before every apache restart.  This means
administrators can now edit the <code class="docutils literal notranslate"><span class="pre">ood_portal.yml</span></code> configuration and then restart httpd
directly without having to do the additional step of running the <code class="docutils literal notranslate"><span class="pre">ood-portal-generator</span></code>.</p>
<p>Apache httpd will read the new configuration, because a new ood-portal.conf will have
been written just before restarting.</p>
<p>However you will have to follow the upgrade  instructions (above), and then this will
be available.  Specifically updating the ood portal through
<code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">/opt/ood/ood-portal-generator/sbin/update_ood_portal</span> <span class="pre">--force</span></code>.</p>
<p>This feature relies on checksums generated by <code class="docutils literal notranslate"><span class="pre">ood-portal-generator</span></code>.  If the checksums
differ (i.e., ood-portal.conf has been edited by hand, outside of the ood-portal-generator
program) this will fail and you’ll have to force an update through <code class="docutils literal notranslate"><span class="pre">update_ood_portal</span> <span class="pre">--force</span></code>.</p>
</div>
<div class="section" id="support-sanitizing-job-names">
<h3>Support sanitizing job names<a class="headerlink" href="#support-sanitizing-job-names" title="Permalink to this headline">¶</a></h3>
<p>Administrators can now set the <code class="docutils literal notranslate"><span class="pre">OOD_JOB_NAME_ILLEGAL_CHARS</span></code> environment variable to prevent
characters from being used in job names.  For example if you do not want to use <code class="docutils literal notranslate"><span class="pre">/</span></code> in job
names (as is the case with some <a class="reference internal" href="../installation/resource-manager/sge.html#resource-manager-sge"><span class="std std-ref">Grid Engine</span></a> versions) you would
set <code class="docutils literal notranslate"><span class="pre">OOD_JOB_NAME_ILLEGAL_CHARS:</span> <span class="pre">'/'</span></code> in the <code class="docutils literal notranslate"><span class="pre">pun_custom_env</span></code> attribute of <code class="docutils literal notranslate"><span class="pre">nginx_stage.yml</span></code>.</p>
</div>
<div class="section" id="nginx-clean-support-for-a-specific-user">
<h3>nginx_clean support for a specific user<a class="headerlink" href="#nginx-clean-support-for-a-specific-user" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">nginx_stage</span> <span class="pre">nginx_clean</span></code> command now supports a <code class="docutils literal notranslate"><span class="pre">-u</span></code> or <code class="docutils literal notranslate"><span class="pre">--user</span></code> option so it may
kill a specific users’ PUN. For example <code class="docutils literal notranslate"><span class="pre">nginx_stage</span> <span class="pre">nginx_clean</span> <span class="pre">-u</span> <span class="pre">johndoe</span></code> would only
kill johndoe’s PUN and disregard all the others.</p>
</div>
<div class="section" id="dashboard-now-alerts-on-malformed-cluster-configs">
<h3>Dashboard now alerts on malformed cluster configs<a class="headerlink" href="#dashboard-now-alerts-on-malformed-cluster-configs" title="Permalink to this headline">¶</a></h3>
<p>Prior to 1.7 the dashboard would not start if there was a cluster cluster definition file
(the files in <code class="docutils literal notranslate"><span class="pre">/etc/ood/config/clusters.d/</span></code>) that had invalid yaml.</p>
<p>The dashboard now handles this gracefully and shows an error message to the user stating that
this file is unusable and should indicate the line of the file that is problematic.</p>
</div>
<div class="section" id="job-composer-now-shows-suggested-scripts">
<h3>Job composer now shows suggested scripts<a class="headerlink" href="#job-composer-now-shows-suggested-scripts" title="Permalink to this headline">¶</a></h3>
<p>When changing the job script in the job composer the user is now presented with a dropdown of
‘Suggested Files’ first along with ‘Other valid files’.</p>
<p>Files in folder will be suggested if they match any of these criteria:</p>
<ol class="arabic simple">
<li><p>Have one of these extensions: “.sh”, “.job”, “.slurm”, “.batch”, “.qsub”, “.sbatch”, “.srun”, “.bsub”</p></li>
<li><p>The file starts with a shebang line (#!)</p></li>
<li><p>Has a resource manager’s directive (#PBS, #SBATCH, #BSUB or #$) in the first 1000 characters.</p></li>
</ol>
<p>Other valid files only have to meet a size requirement of less than <code class="docutils literal notranslate"><span class="pre">OOD_MAX_SCRIPT_SIZE_KB</span></code> which
defaults to 65 (meaning 65 kb).</p>
</div>
<div class="section" id="add-ability-to-disable-ssh-to-compute-node-link-in-batch-connect-session-card">
<h3>Add ability to disable SSH to compute node link in batch connect session card<a class="headerlink" href="#add-ability-to-disable-ssh-to-compute-node-link-in-batch-connect-session-card" title="Permalink to this headline">¶</a></h3>
<p>Administrators can now disable the link that appears in the batch connects’ card to ssh into the compute
node that the job is running on. This is helpful for sites that don’t allow regular users to shell into
compute nodes.</p>
<p>To do so, simply set <code class="docutils literal notranslate"><span class="pre">OOD_BC_SSH_TO_COMPUTE_NODE=0</span></code> (or ‘false’ or ‘off’) in <code class="docutils literal notranslate"><span class="pre">/etc/ood/config/apps/dashboard/env</span></code>.</p>
</div>
<div class="section" id="reduced-installation-size-by-30-percent">
<h3>Reduced installation size by 30 percent<a class="headerlink" href="#reduced-installation-size-by-30-percent" title="Permalink to this headline">¶</a></h3>
<p>We reduced the size of the main OnDemand RPM by nearly 40%.</p>
<p>The 1.6 ondemand-1.6.22-1.el7.x86_64.rpm was 162M and in 1.7 this has been reduced by 63M to a total of 99M, split between two RPMs: ondemand-gems-1.7.10-1.7.10-2.el7.x86_64.rpm with 68M, and ondemand-1.7.10-2.el7.x86_64.rpm with 31M. This is in part due to switching to a monorepo at <a class="reference external" href="https://github.com/osc/ondemand">https://github.com/osc/ondemand</a> and installing all the gems into a central shared location, installed using the new ondemand-gems RPM.</p>
<p>The resulting sizes of the two main install directories, /opt/ood and /var/www/ood/apps/sys, were in total reduced by 181M:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ cat /opt/ood/VERSION
v1.6.22
$ sudo du -h -s  -x /var/www/ood/apps/sys /opt/ood
592M /var/www/ood/apps/sys
17M  /opt/ood
</pre></div>
</div>
<p>vs</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ cat /opt/ood/VERSION
v1.7.10-2
$ sudo du -h -s  -x /var/www/ood/apps/sys /opt/ood
172M /var/www/ood/apps/sys
256M /opt/ood
</pre></div>
</div>
</div>
<div class="section" id="new-shared-ondemand-gem-sets">
<h3>New shared OnDemand gem sets<a class="headerlink" href="#new-shared-ondemand-gem-sets" title="Permalink to this headline">¶</a></h3>
<p>The new ondemand-gems RPMs allow other Passenger apps to be developed using the same gems that the core OnDemand apps use. If you do <code class="docutils literal notranslate"><span class="pre">scl</span> <span class="pre">enable</span> <span class="pre">ondemand</span></code> and then <code class="docutils literal notranslate"><span class="pre">gem</span> <span class="pre">list</span></code> you can see all the gems available.</p>
<p>Because the ondemand-gems RPMs will include the version in the RPM name, it is possible to install multiple versions of these RPMs on the same system. For example, “ondemand-gems-1.7.10” is the name and “1.7.10-2.el7.x86_64.rpm” is the version of ondemand-gems-1.7.10-1.7.10-2.el7.x86_64.rpm. That way you can upgrade to newer versions of OnDemand but still have the ability to provide apps access to older gems by installing the older gem sets.</p>
<p>Having multiple versions of ondemand-gems RPMs ensure that any custom apps relying on gems provided by OnDemand will not break as OnDemand is upgraded as previous installs of ondemand-gems will remain installed when OnDemand is upgraded.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="v1.6-release-notes.html" class="btn btn-neutral float-right" title="v1.6 Release Notes" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="v1.8-release-notes.html" class="btn btn-neutral float-left" title="v1.8 Release Notes" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017-2024, Ohio Supercomputer Center

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Documentation Versions</span>
    v: 
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Versions</dt>
      
        <dd><a href="https://OSC.github.io/ood-documentation/latest/release-notes/v1.7-release-notes.html">latest</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-2.0/release-notes/v1.7-release-notes.html">2.0</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.8/release-notes/v1.7-release-notes.html">1.8</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.7/release-notes/v1.7-release-notes.html">1.7</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.6/release-notes/v1.7-release-notes.html">1.6</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.5/release-notes/v1.7-release-notes.html">1.5</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.4/release-notes/v1.7-release-notes.html">1.4</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.3/release-notes/v1.7-release-notes.html">1.3</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.2/release-notes/v1.7-release-notes.html">1.2</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.1/release-notes/v1.7-release-notes.html">1.1</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.0/release-notes/v1.7-release-notes.html">1.0</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/develop/release-notes/v1.7-release-notes.html">develop</a></dd>
      
    </dl>
    <dl>
      <dt>On GitHub</dt>
        <dd>
          <a href="http://openondemand.org/">Website</a>
        </dd>
        <dd>
          <a href="https://github.com/OSC/Open-OnDemand">Main Repo</a>
        </dd>
    </dl>
    <hr/>
    Theme provided by <a href="http://www.readthedocs.org">Read the Docs</a>.
  </div>
</div>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>