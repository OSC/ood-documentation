

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Cluster Configuration &mdash; Open OnDemand 3.0.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
  <link rel="stylesheet" href="../_static/tabs.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Cluster Config Schema v2" href="cluster-config-schema.html" />
    <link rel="prev" title="4. Add SELinux" href="modify-system-security.html" />
 
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-34776817-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-34776817-3');
</script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/logo.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                3.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../requirements.html">Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Cluster Configuration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="cluster-config-schema.html">Cluster Config Schema v2</a></li>
<li class="toctree-l2"><a class="reference internal" href="resource-manager/torque.html">Torque</a></li>
<li class="toctree-l2"><a class="reference internal" href="resource-manager/slurm.html">Slurm</a></li>
<li class="toctree-l2"><a class="reference internal" href="resource-manager/lsf.html">LSF</a></li>
<li class="toctree-l2"><a class="reference internal" href="resource-manager/pbspro.html">PBS Professional</a></li>
<li class="toctree-l2"><a class="reference internal" href="resource-manager/sge.html">Grid Engine</a></li>
<li class="toctree-l2"><a class="reference internal" href="resource-manager/linuxhost.html">LinuxHost</a></li>
<li class="toctree-l2"><a class="reference internal" href="resource-manager/ccq.html">Cloudy Cluster</a></li>
<li class="toctree-l2"><a class="reference internal" href="resource-manager/kubernetes.html">Kuberenetes</a></li>
<li class="toctree-l2"><a class="reference internal" href="resource-manager/systemd.html">Systemd</a></li>
<li class="toctree-l2"><a class="reference internal" href="resource-manager/bin-override-example.html">A Working Example of a <code class="docutils literal notranslate"><span class="pre">bin_overrides</span></code> Script</a></li>
<li class="toctree-l2"><a class="reference internal" href="resource-manager/test.html">Test Configuration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../how-tos/app-development/interactive/setup.html">Setup Interactive Apps</a></li>
</ul>
<p class="caption"><span class="caption-text">How-Tos</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../customizations.html">Customizations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../how-tos/debug.html">Debugging and Monitoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="../enable-desktops.html">Enable Interactive Desktop</a></li>
<li class="toctree-l1"><a class="reference internal" href="../how-tos/app-development.html">App Development</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../install-ihpc-apps.html">Install Other Interactive Apps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/tutorials-interactive-apps.html">Tutorials: Interactive Apps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/tutorials-passenger-apps.html">Tutorials: Passenger Apps</a></li>
</ul>
<p class="caption"><span class="caption-text">More</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference.html">Configuration Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release-notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../version-policy.html">OOD Versioning Policy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../issues/overview.html">OnDemand’s Known Issues</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Open OnDemand</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Cluster Configuration</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/OSC/ood-documentation/blob/latest/source/installation/add-cluster-config.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="cluster-configuration">
<span id="add-cluster-config"></span><h1>Cluster Configuration<a class="headerlink" href="#cluster-configuration" title="Permalink to this headline">¶</a></h1>
<p>Cluster configuration files describe each cluster a user may submit jobs to and login hosts the user can ssh to.
These files detail how the system can interact with your scheduler. Without them, many of the features in
Open OnDemand won’t work - including interactive apps.</p>
<p>Indeed, one of the main reasons to use Open OnDemand is use your clusters interactively.</p>
<p>Apps that require proper cluster configuration include:</p>
<ul class="simple">
<li><p>shell (connect to a cluster login node from the Dashboard App)</p></li>
<li><p>active-jobs (view a list of active jobs for the various clusters)</p></li>
<li><p>job-composer (submit jobs to various clusters)</p></li>
<li><p>All interactive apps such as Jupyter and RStudio</p></li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>We provide a <a class="reference external" href="https://forge.puppet.com/modules/osc/openondemand">puppet module</a> and an <a class="reference external" href="https://galaxy.ansible.com/osc/open_ondemand">ansible role</a> for automating all of this configuration.</p>
</div>
<ol class="arabic">
<li><p>Create the default directory that the cluster configuration files reside
under:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo mkdir -p /etc/ood/config/clusters.d
</pre></div>
</div>
</li>
<li><p>Create a cluster YAML configuration file for each HPC cluster you want to
provide access to. They must have the <code class="docutils literal notranslate"><span class="pre">.yml</span></code> or <code class="docutils literal notranslate"><span class="pre">.yaml</span></code> extensions.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is best to name the file after the HPC cluster it is defining. For
example, we added the cluster configuration file
<code class="file docutils literal notranslate"><span class="pre">/etc/ood/config/clusters.d/oakley.yml</span></code> for the Oakley cluster here
at OSC.</p>
</div>
<p>The <em>simplest</em> cluster configuration file for an HPC cluster with only a login
node and <strong>no resource manager</strong> looks like:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># /etc/ood/config/clusters.d/my_cluster.yml</span><span class="w"></span>
<span class="nn">---</span><span class="w"></span>
<span class="nt">v2</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">metadata</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;My</span><span class="nv"> </span><span class="s">Cluster&quot;</span><span class="w"></span>
<span class="w">  </span><span class="nt">login</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;my_cluster.my_center.edu&quot;</span><span class="w"></span>
</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">host</span></code> is the SSH server host for the given cluster.</p>
<p>In production you will also want to add a resource manager. That is because the
active-jobs and job-composer pages won’t be able to list or submit
jobs without a defined resource manager.</p>
</li>
</ol>
<p>The <a class="reference internal" href="resource-manager/test.html#resource-manager-test"><span class="std std-ref">Test Configuration</span></a> page provides directions on using a Rake task
to verify the resource manager configuration.</p>
<p>The <a class="reference internal" href="resource-manager/bin-override-example.html#bin-overrides"><span class="std std-ref">A Working Example of a bin_overrides Script</span></a> provides directions on how to
provide a replacement or wrapper script for one or more of the resource manager
client binaries.</p>
<div class="toctree-wrapper compound">
<p class="caption"><span class="caption-text">Cluster Config</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="cluster-config-schema.html">Cluster Config Schema v2</a></li>
<li class="toctree-l1"><a class="reference internal" href="resource-manager/torque.html">Torque</a></li>
<li class="toctree-l1"><a class="reference internal" href="resource-manager/slurm.html">Slurm</a></li>
<li class="toctree-l1"><a class="reference internal" href="resource-manager/lsf.html">LSF</a></li>
<li class="toctree-l1"><a class="reference internal" href="resource-manager/pbspro.html">PBS Professional</a></li>
<li class="toctree-l1"><a class="reference internal" href="resource-manager/sge.html">Grid Engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="resource-manager/linuxhost.html">LinuxHost</a></li>
<li class="toctree-l1"><a class="reference internal" href="resource-manager/ccq.html">Cloudy Cluster</a></li>
<li class="toctree-l1"><a class="reference internal" href="resource-manager/kubernetes.html">Kuberenetes</a></li>
<li class="toctree-l1"><a class="reference internal" href="resource-manager/systemd.html">Systemd</a></li>
<li class="toctree-l1"><a class="reference internal" href="resource-manager/bin-override-example.html">A Working Example of a <code class="docutils literal notranslate"><span class="pre">bin_overrides</span></code> Script</a></li>
<li class="toctree-l1"><a class="reference internal" href="resource-manager/test.html">Test Configuration</a></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="cluster-config-schema.html" class="btn btn-neutral float-right" title="Cluster Config Schema v2" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="modify-system-security.html" class="btn btn-neutral float-left" title="4. Add SELinux" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017-2023, Ohio Supercomputer Center

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Documentation Versions</span>
    v: 
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Versions</dt>
      
        <dd><a href="https://OSC.github.io/ood-documentation/latest/installation/add-cluster-config.html">latest</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-2.0/installation/add-cluster-config.html">2.0</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.8/installation/add-cluster-config.html">1.8</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.7/installation/add-cluster-config.html">1.7</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.6/installation/add-cluster-config.html">1.6</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.5/installation/add-cluster-config.html">1.5</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.4/installation/add-cluster-config.html">1.4</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.3/installation/add-cluster-config.html">1.3</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.2/installation/add-cluster-config.html">1.2</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.1/installation/add-cluster-config.html">1.1</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.0/installation/add-cluster-config.html">1.0</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/develop/installation/add-cluster-config.html">develop</a></dd>
      
    </dl>
    <dl>
      <dt>On GitHub</dt>
        <dd>
          <a href="http://openondemand.org/">Website</a>
        </dd>
        <dd>
          <a href="https://github.com/OSC/Open-OnDemand">Main Repo</a>
        </dd>
    </dl>
    <hr/>
    Theme provided by <a href="http://www.readthedocs.org">Read the Docs</a>.
  </div>
</div>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>