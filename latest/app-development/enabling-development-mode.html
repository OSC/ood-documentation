

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Enabling App Development &mdash; Open OnDemand 2.0.20 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Interactive Apps" href="interactive.html" />
    <link rel="prev" title="App Development" href="../app-development.html" />
 
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-34776817-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-34776817-3');
</script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/logo.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                2.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">General</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference.html">Configuration Reference</a></li>
</ul>
<p class="caption"><span class="caption-text">Install</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../requirements.html">Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../authentication.html">Authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation/add-cluster-config.html">Add Cluster Configuration Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation/resource-manager.html">Resource Manager Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../customization_overview.html">Customization Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../customization.html">Customization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../analytics.html">Analytics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../monitoring.html">Monitoring</a></li>
</ul>
<p class="caption"><span class="caption-text">Extend</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="interactive/setup.html">Setup Interactive Apps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../enable-desktops.html">Enable Interactive Desktop</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install-ihpc-apps.html">Install Other Interactive Apps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../code-snippets.html">Code Snippets</a></li>
</ul>
<p class="caption"><span class="caption-text">Deploy</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../app-authorization.html">App Authorization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../app-sharing.html">App Sharing</a></li>
</ul>
<p class="caption"><span class="caption-text">Develop Interactive Apps</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../app-development.html">App Development</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Enabling App Development</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#enable-in-ondemand-v1-6">Enable in OnDemand v1.6+:</a></li>
<li class="toctree-l3"><a class="reference internal" href="#enable-in-ondemand-v1-4-v1-5">Enable in OnDemand v1.4 &amp; v1.5:</a></li>
<li class="toctree-l3"><a class="reference internal" href="#enable-in-ondemand-v1-3">Enable in OnDemand v1.3:</a></li>
<li class="toctree-l3"><a class="reference internal" href="#specify-dedicated-host-for-development-optional">Specify dedicated host for development (optional)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#make-everyone-a-developer-by-default-optional">Make everyone a developer by default (optional)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="interactive.html">Interactive Apps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorials-interactive-apps.html">Tutorials: Interactive Apps</a></li>
</ul>
<p class="caption"><span class="caption-text">Develop Passenger Apps</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tutorials-passenger-apps.html">Tutorials: Passenger Apps</a></li>
</ul>
<p class="caption"><span class="caption-text">Release Notes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../release-notes/v2.0-release-notes.html">v2.0 Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release-notes/v1.8-release-notes.html">v1.8 Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release-notes/v1.7-release-notes.html">v1.7 Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release-notes/v1.6-release-notes.html">v1.6 Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release-notes/v1.5-release-notes.html">v1.5 Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release-notes/v1.4-release-notes.html">v1.4 Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release-notes/v1.3-release-notes.html">v1.3 Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release-notes/v1.2-release-notes.html">v1.2 Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release-notes/v1.1-release-notes.html">v1.1 Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release-notes/v1.0-release-notes.html">v1.0 Release Notes</a></li>
</ul>
<p class="caption"><span class="caption-text">Known Issues</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../issues/overview.html">OnDemand’s Known Issues</a></li>
</ul>
<p class="caption"><span class="caption-text">Legacy Docs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../applications.html">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user-documentation.html">User Documentation</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Open OnDemand</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../app-development.html">App Development</a> &raquo;</li>
        
      <li>Enabling App Development</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/OSC/ood-documentation/blob/develop/source/app-development/enabling-development-mode.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="enabling-app-development">
<span id="enabling-development-mode"></span><h1>Enabling App Development<a class="headerlink" href="#enabling-app-development" title="Permalink to this headline">¶</a></h1>
<div class="section" id="enable-in-ondemand-v1-6">
<h2>Enable in OnDemand v1.6+:<a class="headerlink" href="#enable-in-ondemand-v1-6" title="Permalink to this headline">¶</a></h2>
<p>Here are example steps to enable a user “efranz”, assuming efranz’s home directory is at <code class="docutils literal notranslate"><span class="pre">/home/efranz</span></code>:</p>
<ol class="arabic">
<li><p>Create a symlink so OnDemand finds efranz’s apps:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo mkdir -p /var/www/ood/apps/dev/efranz
<span class="nb">cd</span> /var/www/ood/apps/dev/efranz
sudo ln -s /home/efranz/ondemand/dev gateway
</pre></div>
</div>
</li>
<li><p>Have efranz access the Dashboard, and efranz will see the Develop dropdown</p></li>
</ol>
</div>
<div class="section" id="enable-in-ondemand-v1-4-v1-5">
<h2>Enable in OnDemand v1.4 &amp; v1.5:<a class="headerlink" href="#enable-in-ondemand-v1-4-v1-5" title="Permalink to this headline">¶</a></h2>
<p>Here are example steps to enable a user “efranz”, assuming efranz’s home directory is at <code class="docutils literal notranslate"><span class="pre">/home/efranz</span></code>:</p>
<ol class="arabic">
<li><p>Create a symlink so OnDemand finds efranz’s apps:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo mkdir -p /var/www/ood/apps/dev/efranz
<span class="nb">cd</span> /var/www/ood/apps/dev/efranz
sudo ln -s /home/efranz/ondemand/dev gateway
</pre></div>
</div>
</li>
<li><p>Create dev directory <code class="docutils literal notranslate"><span class="pre">/home/efranz/ondemand/dev</span></code> where efranz’s dev apps will go (or ask efranz to do that)</p></li>
<li><p>Have efranz access the Dashboard, and efranz will see the Develop dropdown</p></li>
</ol>
</div>
<div class="section" id="enable-in-ondemand-v1-3">
<h2>Enable in OnDemand v1.3:<a class="headerlink" href="#enable-in-ondemand-v1-3" title="Permalink to this headline">¶</a></h2>
<p>Here are example steps to enable a user “efranz”, assuming efranz’s home directory is at <code class="docutils literal notranslate"><span class="pre">/home/efranz</span></code>:</p>
<ol class="arabic simple">
<li><p>Create dev directory <code class="docutils literal notranslate"><span class="pre">/home/efranz/ondemand/dev</span></code> where efranz’s dev apps will go (or ask efranz to do that)</p></li>
<li><p>Have efranz access the Dashboard, and efranz will see the Develop dropdown. (if this doesn’t happen, )</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The rest of the documentation below assumes you are working with OnDemand 1.4+.</p>
</div>
</div>
<div class="section" id="specify-dedicated-host-for-development-optional">
<h2>Specify dedicated host for development (optional)<a class="headerlink" href="#specify-dedicated-host-for-development-optional" title="Permalink to this headline">¶</a></h2>
<p>The default host for the shell app is typically a login node. If this node does not contain a similar environment as the host OnDemand is installed on, including access to Software Collection (SCL) packages, it may be useful to provide developers a dedicated development host they can SSH to. This could even be the OnDemand host itself. If you configure the OnDemand dashboard to know about the dedicated development host, the dashboard will present links to open the shell app to this host.</p>
<p>To specify a dedicated development host so OnDemand, set <code class="docutils literal notranslate"><span class="pre">OOD_DEV_SSH_HOST</span></code> environment variable for the dashboard in the file <code class="docutils literal notranslate"><span class="pre">/etc/ood/config/apps/dashboard/env</span></code>. For example at OSC one of our OnDemand installs uses ondemand-test.osc.edu for the development host so we have this line: <a class="reference external" href="https://github.com/OSC/osc-ood-config/blob/bde54e4c5a9fd756f74ac981f8c607320e9a0bf0/ondemand.osc.edu/apps/dashboard/env#L20">OOD_DEV_SSH_HOST=”ondemand-test.osc.edu”</a></p>
</div>
<div class="section" id="make-everyone-a-developer-by-default-optional">
<h2>Make everyone a developer by default (optional)<a class="headerlink" href="#make-everyone-a-developer-by-default-optional" title="Permalink to this headline">¶</a></h2>
<p>To revert to the way developer enabling worked in OnDemand 1.3, change the nginx_stage app_root configuration for dev apps by modifying /etc/ood/config/nginx_stage.yml and replacing</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">app_root</span><span class="p">:</span><span class="w"></span>
<span class="hll"><span class="w">  </span><span class="nt">dev</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;/var/www/ood/apps/dev/%{owner}/gateway/%{name}&#39;</span><span class="w"></span>
</span><span class="w">  </span><span class="nt">usr</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;/var/www/ood/apps/usr/%{owner}/gateway/%{name}&#39;</span><span class="w"></span>
<span class="w">  </span><span class="nt">sys</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;/var/www/ood/apps/sys/%{name}&#39;</span><span class="w"></span>
</pre></div>
</div>
<p>with</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">app_root</span><span class="p">:</span><span class="w"></span>
<span class="hll"><span class="w">  </span><span class="nt">dev</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;~%{owner}/%{portal}/dev/%{name}&#39;</span><span class="w"></span>
</span><span class="w">  </span><span class="nt">usr</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;/var/www/ood/apps/usr/%{owner}/gateway/%{name}&#39;</span><span class="w"></span>
<span class="w">  </span><span class="nt">sys</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;/var/www/ood/apps/sys/%{name}&#39;</span><span class="w"></span>
</pre></div>
</div>
<p>Then users can just create the directory <code class="docutils literal notranslate"><span class="pre">~/ondemand/dev</span></code> and the Develop dropdown will appear.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If you do this, it is recommended that you treat the node that OnDemand is running on as a login node, as you are effectively giving those users shell access by letting them run arbitrary code on the OnDemand node (of course the UID of the processes are still their regular unprivileged user UID).</p>
</div>
<p>If you do this, you still might want to restrict who sees the Develop dropdown in the Dashboard. To do that you can explicitly show or hide the dropdown in the Dashboard by setting <code class="docutils literal notranslate"><span class="pre">Configuration.app_development_enabled</span></code> to true based on one or more Ruby statements in the initializer <code class="docutils literal notranslate"><span class="pre">/etc/ood/config/apps/dashboard/initializers/ood.rb</span></code>. Code in the initializer runs as the user. This code also has access to the <a class="reference external" href="http://www.rubydoc.info/github/OSC/ood_support">ood_support library</a> in which we provide some helper classes to work with User’s and Groups. For example:</p>
<blockquote>
<div><div class="highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="no">Configuration</span><span class="o">.</span><span class="n">app_development_enabled</span> <span class="o">=</span> <span class="no">OodSupport</span><span class="o">::</span><span class="no">Process</span><span class="o">.</span><span class="n">groups</span><span class="o">.</span><span class="n">include?</span><span class="p">(</span>
  <span class="no">OodSupport</span><span class="o">::</span><span class="no">Group</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;devgrp&quot;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Or if you know the id of the group, this will avoid reading the <code class="docutils literal notranslate"><span class="pre">/etc/group</span></code>
file:</p>
<div class="highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="no">Configuration</span><span class="o">.</span><span class="n">app_development_enabled</span> <span class="o">=</span> <span class="no">Process</span><span class="o">.</span><span class="n">groups</span><span class="o">.</span><span class="n">include?</span><span class="p">(</span><span class="mi">5014</span><span class="p">)</span>
</pre></div>
</div>
<p>Or a specific user list:</p>
<div class="highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="no">Configuration</span><span class="o">.</span><span class="n">app_development_enabled</span> <span class="o">=</span> <span class="sx">%w(</span>
<span class="sx">  bgohar efranz bmcmichael</span>
<span class="sx">)</span><span class="o">.</span><span class="n">include?</span><span class="p">(</span><span class="no">OodSupport</span><span class="o">::</span><span class="no">User</span><span class="o">.</span><span class="n">new</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="interactive.html" class="btn btn-neutral float-right" title="Interactive Apps" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../app-development.html" class="btn btn-neutral float-left" title="App Development" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017-2022, Ohio Supercomputer Center

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Documentation Versions</span>
    v: 
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Versions</dt>
      
        <dd><a href="https://OSC.github.io/ood-documentation/latest/app-development/enabling-development-mode.html">latest</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-2.0/app-development/enabling-development-mode.html">2.0</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.8/app-development/enabling-development-mode.html">1.8</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.7/app-development/enabling-development-mode.html">1.7</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.6/app-development/enabling-development-mode.html">1.6</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.5/app-development/enabling-development-mode.html">1.5</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.4/app-development/enabling-development-mode.html">1.4</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.3/app-development/enabling-development-mode.html">1.3</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.2/app-development/enabling-development-mode.html">1.2</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.1/app-development/enabling-development-mode.html">1.1</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.0/app-development/enabling-development-mode.html">1.0</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/develop/app-development/enabling-development-mode.html">develop</a></dd>
      
    </dl>
    <dl>
      <dt>On GitHub</dt>
        <dd>
          <a href="http://openondemand.org/">Website</a>
        </dd>
        <dd>
          <a href="https://github.com/OSC/Open-OnDemand">Main Repo</a>
        </dd>
    </dl>
    <hr/>
    Theme provided by <a href="http://www.readthedocs.org">Read the Docs</a>.
  </div>
</div>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>