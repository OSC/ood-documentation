

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>v2.0 Release Notes &mdash; Open OnDemand 3.0.3 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/tabs.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
  <link rel="stylesheet" href="../_static/tabs.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="v1.8 Release Notes" href="v1.8-release-notes.html" />
    <link rel="prev" title="v3.0 Release Notes" href="v3.0-release-notes.html" />
 
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-34776817-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-34776817-3');
</script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/logo.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                3.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../requirements.html">Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation/add-cluster-config.html">Cluster Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../how-tos/app-development/interactive/setup.html">Setup Interactive Apps</a></li>
</ul>
<p class="caption"><span class="caption-text">How-Tos</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../customizations.html">Customizations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../how-tos/debug.html">Debugging and Monitoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="../enable-desktops.html">Enable Interactive Desktop</a></li>
<li class="toctree-l1"><a class="reference internal" href="../how-tos/app-development.html">App Development</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../install-ihpc-apps.html">Install Other Interactive Apps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/tutorials-interactive-apps.html">Tutorials: Interactive Apps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/tutorials-passenger-apps.html">Tutorials: Passenger Apps</a></li>
</ul>
<p class="caption"><span class="caption-text">More</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference.html">Configuration Reference</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../release-notes.html">Release Notes</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="v3.0-release-notes.html">v3.0 Release Notes</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">v2.0 Release Notes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#upgrading-to-v2-0-29">Upgrading to v2.0.29</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#major-changes">Major Changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#upgrade-directions">Upgrade directions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#upgrading-from-v1-8">Upgrading from v1.8</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#breaking-changes">Breaking Changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id2">Upgrade directions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#details">Details</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pinned-apps-enhanced-app-launch-interface-using-large-app-icons-on-the-dashboard">Pinned Apps: Enhanced app launch interface using large app icons on the dashboard</a></li>
<li class="toctree-l4"><a class="reference internal" href="#custom-dashboard-widgets-and-layout">Custom dashboard widgets and layout</a></li>
<li class="toctree-l4"><a class="reference internal" href="#adding-metadata-to-app-manifests">Adding metadata to app manifests</a></li>
<li class="toctree-l4"><a class="reference internal" href="#shell-app-now-has-themes">Shell app now has themes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configurations-in-an-ondemand-d-directory">Configurations in an ondemand.d directory</a></li>
<li class="toctree-l4"><a class="reference internal" href="#tighter-integration-between-the-dashboard-active-jobs-and-files-apps">Tighter integration between the Dashboard, Active Jobs, and Files apps</a></li>
<li class="toctree-l4"><a class="reference internal" href="#new-file-manager-app">New File Manager app</a></li>
<li class="toctree-l4"><a class="reference internal" href="#changes-in-all-apps-page-layout">Changes in All Apps page layout</a></li>
<li class="toctree-l4"><a class="reference internal" href="#erb-formats-for-message-of-the-day">ERB formats for Message of the day</a></li>
<li class="toctree-l4"><a class="reference internal" href="#control-whether-an-app-link-opens-in-a-new-window-using-manifest-attribute">Control whether an app link opens in a new window using manifest attribute</a></li>
<li class="toctree-l4"><a class="reference internal" href="#memcached-ruby-gem-available-for-use-in-apps">Memcached Ruby gem available for use in apps</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dependency-updates">Dependency updates</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="v1.8-release-notes.html">v1.8 Release Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.7-release-notes.html">v1.7 Release Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.6-release-notes.html">v1.6 Release Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.5-release-notes.html">v1.5 Release Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.4-release-notes.html">v1.4 Release Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.3-release-notes.html">v1.3 Release Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.2-release-notes.html">v1.2 Release Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.1-release-notes.html">v1.1 Release Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="v1.0-release-notes.html">v1.0 Release Notes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../version-policy.html">OOD Versioning Policy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../issues/overview.html">OnDemand’s Known Issues</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Open OnDemand</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../release-notes.html">Release Notes</a> &raquo;</li>
        
      <li>v2.0 Release Notes</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/OSC/ood-documentation/blob/latest/source/release-notes/v2.0-release-notes.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="v2-0-release-notes">
<span id="id1"></span><h1>v2.0 Release Notes<a class="headerlink" href="#v2-0-release-notes" title="Permalink to this headline">¶</a></h1>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>There are some breaking changes in 2.0. See the upgrade directions below for details.</p>
</div>
<p>Highlights in 2.0:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#pinned-apps-enhanced-app-launch-interface-using-large-app-icons-on-the-dashboard">Pinned Apps: Enhanced app launch interface using large app icons on the dashboard</a></p></li>
<li><p><a class="reference internal" href="#custom-dashboard-widgets-and-layout">Custom dashboard widgets and layout</a></p></li>
<li><p><a class="reference internal" href="#new-file-manager-app">New File Manager app</a></p></li>
<li><p><a class="reference internal" href="#tighter-integration-between-the-dashboard-active-jobs-and-files-apps">Tighter integration between the Dashboard, Active Jobs, and Files apps</a></p></li>
<li><p><a class="reference internal" href="#adding-metadata-to-app-manifests">Adding metadata to app manifests</a></p></li>
<li><p><a class="reference internal" href="#shell-app-now-has-themes">Shell app now has themes</a></p></li>
<li><p><a class="reference internal" href="#configurations-in-an-ondemand-d-directory">Configurations in an ondemand.d directory</a></p></li>
<li><p><a class="reference internal" href="#changes-in-all-apps-page-layout">Changes in All Apps page layout</a></p></li>
<li><p><a class="reference internal" href="#erb-formats-for-message-of-the-day">ERB formats for Message of the day</a></p></li>
<li><p><a class="reference internal" href="#control-whether-an-app-link-opens-in-a-new-window-using-manifest-attribute">Control whether an app link opens in a new window using manifest attribute</a></p></li>
<li><p><a class="reference internal" href="#memcached-ruby-gem-available-for-use-in-apps">Memcached Ruby gem available for use in apps</a></p></li>
<li><p><a class="reference internal" href="#dependency-updates">Dependency updates</a></p></li>
</ul>
<div class="section" id="upgrading-to-v2-0-29">
<h2>Upgrading to v2.0.29<a class="headerlink" href="#upgrading-to-v2-0-29" title="Permalink to this headline">¶</a></h2>
<div class="section" id="major-changes">
<h3>Major Changes<a class="headerlink" href="#major-changes" title="Permalink to this headline">¶</a></h3>
<div class="section" id="require-nodejs-14">
<h4>Require NodeJS 14<a class="headerlink" href="#require-nodejs-14" title="Permalink to this headline">¶</a></h4>
<p>NodeJS 14 is now required as NodeJS 12 is currently End-Of-Life.</p>
</div>
</div>
<div class="section" id="upgrade-directions">
<h3>Upgrade directions<a class="headerlink" href="#upgrade-directions" title="Permalink to this headline">¶</a></h3>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-0-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-0-0-0" name="0-0" role="tab" tabindex="0">RHEL/CentOS 7</button><button aria-controls="panel-0-0-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-1" name="0-1" role="tab" tabindex="-1">RHEL/Rocky Linux 8</button><button aria-controls="panel-0-0-2" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-2" name="0-2" role="tab" tabindex="-1">Ubuntu</button></div><div aria-labelledby="tab-0-0-0" class="sphinx-tabs-panel" id="panel-0-0-0" name="0-0" role="tabpanel" tabindex="0"><div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo yum update ondemand
</pre></div>
</div>
</div><div aria-labelledby="tab-0-0-1" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-1" name="0-1" role="tabpanel" tabindex="0"><div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo dnf module reset nodejs
sudo dnf module <span class="nb">enable</span> nodejs:14
sudo dnf update ondemand
</pre></div>
</div>
</div><div aria-labelledby="tab-0-0-2" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-2" name="0-2" role="tabpanel" tabindex="0"><div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>wget -O /tmp/ondemand-release-web_2.0.1_all.deb https://apt.osc.edu/ondemand/2.0/ondemand-release-web_2.0.1_all.deb
sudo apt -o Dpkg::Options::<span class="o">=</span><span class="s2">&quot;--force-confnew&quot;</span> install /tmp/ondemand-release-web_2.0.1_all.deb
sudo apt update
sudo apt install --only-upgrade ondemand
</pre></div>
</div>
</div></div>
</div>
</div>
<div class="section" id="upgrading-from-v1-8">
<h2>Upgrading from v1.8<a class="headerlink" href="#upgrading-from-v1-8" title="Permalink to this headline">¶</a></h2>
<div class="section" id="breaking-changes">
<h3>Breaking Changes<a class="headerlink" href="#breaking-changes" title="Permalink to this headline">¶</a></h3>
<div class="section" id="no-longer-providing-ood-auth-map-regex">
<h4>No longer providing ood_auth_map.regex<a class="headerlink" href="#no-longer-providing-ood-auth-map-regex" title="Permalink to this headline">¶</a></h4>
<p>2.0 no longer provides <code class="docutils literal notranslate"><span class="pre">/opt/ood/ood_auth_map/bin/ood_auth_map.regex</span></code>, the 1.8- default
<code class="docutils literal notranslate"><span class="pre">user_map_cmd</span></code> in <code class="docutils literal notranslate"><span class="pre">ood_portal.yml</span></code>.</p>
<p>Most sites should be able to use <code class="docutils literal notranslate"><span class="pre">user_map_match</span></code> instead.  You can still use
<code class="docutils literal notranslate"><span class="pre">user_map_cmd</span></code>, only you’ll have to write your own in a language of your choice.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>lua patterns may not be sufficient because they are not regular expressions. For example
they do not support boolean OR <code class="docutils literal notranslate"><span class="pre">|</span></code> operators. If you need such functionality you may
find python, perl, ruby (SCL or system installed) or even bash commands that suite your
needs.</p>
</div>
<p>See the <a class="reference internal" href="../reference/files/ood-portal-yml.html#ood-portal-generator-user-map-match"><span class="std std-ref">documentation on user_map_match</span></a>
for more information on it.</p>
</div>
<div class="section" id="scl-ruby-no-longer-available-to-apache">
<h4>SCL Ruby no longer available to apache<a class="headerlink" href="#scl-ruby-no-longer-available-to-apache" title="Permalink to this headline">¶</a></h4>
<p>Related to the ood_auth_map.regex change above, apache no longer relies on the SCL version
of Ruby.  This means that Ruby 2.7 is unavailable to apache and consequently any <code class="docutils literal notranslate"><span class="pre">user_map_cmd</span></code>
you employ.</p>
<p>Should you need Ruby 2.7 in any commands or scripts that apache calls, the best mitigation is
to employ a wrapper script that can load rh-ruby27.</p>
</div>
<div class="section" id="app-sharing-landing-page">
<h4>App sharing landing page<a class="headerlink" href="#app-sharing-landing-page" title="Permalink to this headline">¶</a></h4>
<p>If your site has enabled app sharing through <code class="docutils literal notranslate"><span class="pre">OOD_APP_SHARING</span></code> the dashboard’s landing page will
no longer show these app icons by default.</p>
<p>Your site will need to use the pinned apps feature to have the same look as 1.8.20-.  Here is the relevant
configuration you’ll need to provide to have a comparable landing page layout.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># /etc/ood/config/ondemand.d/ondemand.yml</span><span class="w"></span>
<span class="nt">pinned_apps</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;usr/*&#39;</span><span class="w"></span>

<span class="nt">pinned_apps_group_by</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;category&#39;</span><span class="w"></span>
</pre></div>
</div>
<p>See <a class="reference internal" href="../customizations.html#dashboard-pinned-apps"><span class="std std-ref">the documentation on pinning apps to the dashboard</span></a> for more details.</p>
</div>
<div class="section" id="ruby-and-bundler-updates">
<h4>Ruby and bundler updates<a class="headerlink" href="#ruby-and-bundler-updates" title="Permalink to this headline">¶</a></h4>
<p>Open OnDemand 2.0 now uses Ruby 2.7, up from 2.5.  If you have Passenger apps that have been built
against 2.5, these will need to be rebuilt against 2.7.</p>
<p>This release also updates bundler to 2.1.4, up from 1.17.3.  These versions are incompatible with
each other, so passenger apps will also need to update their bundler dependencies.</p>
</div>
<div class="section" id="activejobs-configuration-changes">
<h4>ActiveJobs configuration changes<a class="headerlink" href="#activejobs-configuration-changes" title="Permalink to this headline">¶</a></h4>
<p>Because ActiveJobs is now integrated with the Dashboard app, configuration files are no longer
being read from <code class="docutils literal notranslate"><span class="pre">/etc/ood/config/apps/activejobs</span></code>.</p>
<p>If you have initializers here in this directory, they need to move to
<code class="docutils literal notranslate"><span class="pre">/etc/ood/config/apps/dashboard/initializers</span></code>.  Similarly views, if any,
need to move to <code class="docutils literal notranslate"><span class="pre">/etc/ood/config/apps/dashboard/views</span></code>.</p>
<p>If you used the class <code class="docutils literal notranslate"><span class="pre">Filter</span></code> to add or modify the filter menus in an initializer,
this now needs to be <code class="docutils literal notranslate"><span class="pre">ActiveJobs::Filter</span></code>.</p>
</div>
<div class="section" id="files-app-configuration-changes">
<h4>Files app configuration changes<a class="headerlink" href="#files-app-configuration-changes" title="Permalink to this headline">¶</a></h4>
<p>Because Files app is now integrated with the Dashboard app, configurations
in <code class="docutils literal notranslate"><span class="pre">/etc/ood/config/apps/files</span></code> need to move to <code class="docutils literal notranslate"><span class="pre">/etc/ood/config/apps/dashboard</span></code> for
them to take effect.</p>
<p>The use of the environment variable <code class="docutils literal notranslate"><span class="pre">OOD_SHELL</span></code> to hide the Terminal button has been deprecated
and can now be set with the <code class="docutils literal notranslate"><span class="pre">files_enable_shell_button</span></code> parameter in the <code class="docutils literal notranslate"><span class="pre">/etc/ood/config/ondemand.d/*.yml</span></code> file.</p>
</div>
<div class="section" id="changes-to-the-interactive-cards">
<h4>Changes to the interactive cards<a class="headerlink" href="#changes-to-the-interactive-cards" title="Permalink to this headline">¶</a></h4>
<p>The interactive sessions cards have changed with the bootstrap 4 upgrade. If your site
uses complex logic in your <cite>view.html.erb</cite> you may have to change that.  Here are
the two changes that may affect your site.</p>
<ol class="arabic simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">panel</span></code> css classes no longer exist. These have been replaced by <code class="docutils literal notranslate"><span class="pre">card</span></code>.
Here are examples in both plain javascript and jquery of what you may have and how
it would need to change.</p></li>
</ol>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// there is no closes panel to this element anymore. This won&#39;t work, because</span>
<span class="c1">// there are no elements with a &#39;panel&#39; css class.</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;someElementId&quot;</span><span class="p">).</span><span class="nx">closest</span><span class="p">(</span><span class="s2">&quot;.panel&quot;</span><span class="p">).</span><span class="nx">id</span><span class="p">;</span>

<span class="c1">// search for the closest element with a card class instead</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;someElementId&quot;</span><span class="p">).</span><span class="nx">closest</span><span class="p">(</span><span class="s2">&quot;.card&quot;</span><span class="p">).</span><span class="nx">id</span><span class="p">;</span>

<span class="c1">// the same thing in jquery</span>
<span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#someElementId&quot;</span><span class="p">).</span><span class="nx">closest</span><span class="p">(</span><span class="s2">&quot;.card&quot;</span><span class="p">)[</span><span class="mf">0</span><span class="p">].</span><span class="nx">id</span>
</pre></div>
</div>
<ol class="arabic">
<li><p>The <code class="docutils literal notranslate"><span class="pre">id</span></code> of the card divs has changed to prepend <code class="docutils literal notranslate"><span class="pre">id_</span></code> to them to fix some issues in Bootstrap-4.
So if you use <code class="docutils literal notranslate"><span class="pre">&lt;%=</span> <span class="pre">session_id</span> <span class="pre">&gt;</span></code> to query for elements you will either need to prepend <code class="docutils literal notranslate"><span class="pre">id_</span></code> to that
or change the query to look for the <code class="docutils literal notranslate"><span class="pre">data-id</span></code> attribute of a div.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">&lt;%=</span> <span class="pre">session_id</span> <span class="pre">&gt;</span></code> doesn’t work directly. You would need to pass it back through the <code class="docutils literal notranslate"><span class="pre">conn_params</span></code>
for it to be usable in this view.</p>
</div>
</li>
</ol>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// searching for cards like this will no longer work because the id of the cards has changed.</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;&lt;= session_id &gt;&quot;</span><span class="p">);</span>
<span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#&lt;= session_id &gt;&quot;</span><span class="p">);</span> <span class="c1">// same thing in jquery</span>


<span class="c1">// you will now have to prepend the string &#39;id_&#39; to them</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;id_&lt;= session_id &gt;&quot;</span><span class="p">);</span>
<span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#id_&lt;= session_id &gt;&quot;</span><span class="p">);</span> <span class="c1">// same thing in jquery</span>

<span class="c1">// the original session id is still stored in the attribute data-id, so this</span>
<span class="c1">// works in jquery</span>
<span class="nx">$</span><span class="p">(</span><span class="s2">&quot;div[data-id=&#39;&lt;%= session_id &gt;&#39;]&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id2">
<h3>Upgrade directions<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>As always please update the <em>development</em> or <em>test</em> instances of OnDemand installed at your center first to test and verify before you modify the <em>production</em> instance.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The OnDemand upgrade has only been tested going from 1.8.x to 2.0.x.</p>
</div>
<ol class="arabic">
<li><p>Update OnDemand release RPM</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo yum install -y https://yum.osc.edu/ondemand/2.0/ondemand-release-web-2.0-1.noarch.rpm
</pre></div>
</div>
</li>
<li><p>Enable dependency repos</p>
<p><strong>CentOS/RHEL 8 only</strong></p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo dnf module reset ruby
sudo dnf module <span class="nb">enable</span> ruby:2.7
sudo dnf module reset nodejs
sudo dnf module <span class="nb">enable</span> nodejs:12
</pre></div>
</div>
<p><strong>RedHat 8 only</strong></p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo subscription-manager repos --enable codeready-builder-for-rhel-8-x86_64-rpms
</pre></div>
</div>
<p><strong>CentOS 8 only</strong></p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo dnf config-manager --set-enabled powertools
</pre></div>
</div>
<p><strong>CentOS/RHEL 7 only</strong></p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo yum install epel-release
</pre></div>
</div>
</li>
<li><p>Update OnDemand</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo yum clean all
sudo yum update ondemand
</pre></div>
</div>
</li>
<li><p>(Optional) If using Dex based authentication, update the <code class="docutils literal notranslate"><span class="pre">ondemand-dex</span></code> package.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo yum update ondemand-dex
</pre></div>
</div>
</li>
<li><p>Update Apache configuration and restart Apache.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo /opt/ood/ood-portal-generator/sbin/update_ood_portal
</pre></div>
</div>
<p><strong>CentOS/RHEL 8 only</strong></p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo systemctl try-restart httpd
</pre></div>
</div>
<p><strong>CentOS/RHEL 7 only</strong></p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo systemctl try-restart httpd24-httpd.service
</pre></div>
</div>
</li>
<li><p>(Optional) If <code class="docutils literal notranslate"><span class="pre">ondemand-dex</span></code> was installed, restart the <code class="docutils literal notranslate"><span class="pre">ondemand-dex</span></code> service.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo systemctl try-restart ondemand-dex.service
</pre></div>
</div>
</li>
<li><p>(Optional) If <code class="docutils literal notranslate"><span class="pre">ondemand-selinux</span></code> was installed, see <a class="reference internal" href="../installation/modify-system-security.html#ood-selinux-updates"><span class="std std-ref">SELinux after Updates</span></a></p></li>
<li><p>Force all PUNs to restart</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo /opt/ood/nginx_stage/sbin/nginx_stage nginx_clean -f
</pre></div>
</div>
</li>
<li><p>(Optional) Remove old dependencies from prior versions of OOD if they are not used by other applications.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>See <a class="reference internal" href="#dependency-updates">Dependency updates</a> warning before uninstalling old Ruby versions.</p>
</div>
<p><strong>CentOS/RHEL 7 only</strong></p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo yum remove rh-ruby25<span class="se">\*</span> rh-nodejs10<span class="se">\*</span>
</pre></div>
</div>
</li>
</ol>
</div>
</div>
<div class="section" id="details">
<h2>Details<a class="headerlink" href="#details" title="Permalink to this headline">¶</a></h2>
<div class="section" id="pinned-apps-enhanced-app-launch-interface-using-large-app-icons-on-the-dashboard">
<h3>Pinned Apps: Enhanced app launch interface using large app icons on the dashboard<a class="headerlink" href="#pinned-apps-enhanced-app-launch-interface-using-large-app-icons-on-the-dashboard" title="Permalink to this headline">¶</a></h3>
<p>As the number of apps increases and the sophistication of the typical user decreases
- now including even undergraduate students using OnDemand in the classroom - it has
become desirable to be able to present only a small subset of the apps that are relevant
for a particular user.</p>
<p>2.0 now allows sites to pin a grid of application icons to the dashboard for easy access
and to a subset of apps that you want to feature. The grid layout of application icons
is meant to give users a desktop look and feel to the dashboard.</p>
<p>There are several strategies available to choose which apps to pin. For example, metadata
in the app manifests could specify a field_of_science attribute, and then the pinned apps
could be configured to display all apps with the field_of_science being “Biology”. The
configuration for pinned apps can be made dynamic using ERB so it can be changed based on
which user or group is accessing the dashboard. Pinned apps can also further be grouped by
a particular attribute.</p>
<p>See the <a class="reference internal" href="../customizations.html#dashboard-pinned-apps"><span class="std std-ref">documentation on pinning apps to the dashboard</span></a> for details.</p>
</div>
<div class="section" id="custom-dashboard-widgets-and-layout">
<h3>Custom dashboard widgets and layout<a class="headerlink" href="#custom-dashboard-widgets-and-layout" title="Permalink to this headline">¶</a></h3>
<p>See the <a class="reference internal" href="../customizations.html#dashboard-custom-layout"><span class="std std-ref">documentation on customizing dashboard layouts</span></a> for details.</p>
</div>
<div class="section" id="adding-metadata-to-app-manifests">
<h3>Adding metadata to app manifests<a class="headerlink" href="#adding-metadata-to-app-manifests" title="Permalink to this headline">¶</a></h3>
<p>App manifest files now allow for metadata fields for grouping and display in the all apps table.
See <a class="reference internal" href="../how-tos/app-development/interactive/manifest.html#app-development-manifest"><span class="std std-ref">documentation on manifest files</span></a> for more details.</p>
</div>
<div class="section" id="shell-app-now-has-themes">
<h3>Shell app now has themes<a class="headerlink" href="#shell-app-now-has-themes" title="Permalink to this headline">¶</a></h3>
<p>The shell app now allows for users to choose a color theme other than the default and ships with
thirteen extra themes.</p>
</div>
<div class="section" id="configurations-in-an-ondemand-d-directory">
<h3>Configurations in an ondemand.d directory<a class="headerlink" href="#configurations-in-an-ondemand-d-directory" title="Permalink to this headline">¶</a></h3>
<p>We’ve added an ondemand.d directory to start moving configurations there. Some new features for
2.0 rely on configurations read from files in this directory.</p>
<p>See <a class="reference internal" href="../reference/files/ondemand-d-ymls.html#ondemand-d-ymls"><span class="std std-ref">the documentation for the ondemand.d configurations</span></a> for all the
available configurations.</p>
</div>
<div class="section" id="tighter-integration-between-the-dashboard-active-jobs-and-files-apps">
<h3>Tighter integration between the Dashboard, Active Jobs, and Files apps<a class="headerlink" href="#tighter-integration-between-the-dashboard-active-jobs-and-files-apps" title="Permalink to this headline">¶</a></h3>
<p>In OnDemand 1.8, the Dashboard, Active Jobs, Files, and File Editor apps were all served by separate
Passenger application processes. These are all now served by a single Passenger application process per user.</p>
<p>This change has the following effects:</p>
<ul class="simple">
<li><p>The URL has changed, but redirects from the old URLs should still work for backwards compatibility.</p></li>
<li><p>The navbar and branding across the dashboard is visible in Active Jobs and File Editor</p></li>
<li><p>the Active Jobs and Files apps both load without opening a new window</p></li>
<li><p>the Active Jobs and Files apps load much faster than before</p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Configuration for Active Jobs and Files apps have changed slightly and need to be updated for 2.0.
See <a class="reference internal" href="#breaking-changes">Breaking Changes</a> above for details.</p>
</div>
</div>
<div class="section" id="new-file-manager-app">
<h3>New File Manager app<a class="headerlink" href="#new-file-manager-app" title="Permalink to this headline">¶</a></h3>
<p>The Files app in 1.8 was a fork of <a class="reference external" href="https://github.com/coderaiser/cloudcmd">https://github.com/coderaiser/cloudcmd</a> that was difficult to maintain. The new Files app is rewritten in Ruby and integrated into the Dashboard app. The look and feel has been updated to use Bootstrap 4 and the OnDemand navbar displays above the interface.</p>
<p>New features:</p>
<ul class="simple">
<li><p>Modified at column now shows date and time</p></li>
<li><p>Columns are sortable by size, date, name, type, etc.</p></li>
<li><p>Owner column displays the actual username instead of just the UID</p></li>
<li><p>Uploads now managed with Uppy.js which provides a preview window prior to uploading files</p></li>
<li><p>Copy path button provides easy way to copy the current directory path to clipboard</p></li>
<li><p>Copy, Move, and Delete events now log details of the action requested in the per user NGINX logs</p></li>
<li><p>Copy, Move workflow includes a new visual display of the files selected to copy or move</p></li>
<li><p>Filter box to filter the list of files by inserted text</p></li>
</ul>
<p>Changes:</p>
<ul class="simple">
<li><p>The left hand navigation tree is replaced with a list of the file location shortcuts</p></li>
<li><p>Instead of a “..” row to navigate up, there is an “up” button to the left of the path</p></li>
<li><p>Buttons that apply to only one file or directory were moved to a button dropdown to the right of each filename</p></li>
<li><p>“Change directory” button replaced “Go to” button</p></li>
<li><p>Open in Terminal now displays split dropdown button to ssh to any available login host without any extra configuration required. Previously this was done by setting an SSH_HOSTS env var</p></li>
</ul>
<p>See the <a class="reference internal" href="#files-app-configuration-changes">files app configuration changes</a> for any changes you’ll need to update to the
configurations of this new app.</p>
<div class="figure align-default">
<img alt="../_images/2.0_files_app.png" src="../_images/2.0_files_app.png" />
</div>
</div>
<div class="section" id="changes-in-all-apps-page-layout">
<h3>Changes in All Apps page layout<a class="headerlink" href="#changes-in-all-apps-page-layout" title="Permalink to this headline">¶</a></h3>
<p>The ‘All Apps’ page is now a filterable table instead of cards.  Note that new columns will
be dynamically added by <a class="reference internal" href="#adding-metadata-to-app-manifests">adding metadata to app manifests</a>.</p>
</div>
<div class="section" id="erb-formats-for-message-of-the-day">
<h3>ERB formats for Message of the day<a class="headerlink" href="#erb-formats-for-message-of-the-day" title="Permalink to this headline">¶</a></h3>
<p>The message of the day text and markdown formats now support ERB rendering for a more
dynamic message being rendered. See the <a class="reference internal" href="../customizations.html#motd-customization"><span class="std std-ref">documentation on Message of the Day</span></a>
for more information.</p>
</div>
<div class="section" id="control-whether-an-app-link-opens-in-a-new-window-using-manifest-attribute">
<h3>Control whether an app link opens in a new window using manifest attribute<a class="headerlink" href="#control-whether-an-app-link-opens-in-a-new-window-using-manifest-attribute" title="Permalink to this headline">¶</a></h3>
<p>In 1.8, all links to apps that are separate Passenger processes open in a new window or tab. The rationale for this
was that these apps do not share the navigational context with the Dashboard app - in particular the navbar is not present.</p>
<p>By adding to the manifest.yml <code class="docutils literal notranslate"><span class="pre">new_window:</span> <span class="pre">false</span></code> the app is indicating it provides enough navigational context for the user
to not get lost and the Dashboard will not open in new window.</p>
<p>This feature is used by the Files and Active Jobs apps in 2.0.</p>
</div>
<div class="section" id="memcached-ruby-gem-available-for-use-in-apps">
<h3>Memcached Ruby gem available for use in apps<a class="headerlink" href="#memcached-ruby-gem-available-for-use-in-apps" title="Permalink to this headline">¶</a></h3>
<p>The “dalli” Ruby gem for interfacing with memcached can now be used in batch connect apps though it needs
to be explicitly required using a custom initializer or in the form or submit erb files.</p>
</div>
<div class="section" id="dependency-updates">
<h3>Dependency updates<a class="headerlink" href="#dependency-updates" title="Permalink to this headline">¶</a></h3>
<p>This release updates the following dependencies:</p>
<ul>
<li><p>Ruby 2.7</p></li>
<li><p>NodeJS 12</p></li>
<li><p>Passenger 6.0.7</p></li>
<li><p>NGINX 1.18.0</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The change in Ruby version means any Ruby based apps that are not provided by the OnDemand RPM must be rebuilt.</p>
</div>
</li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="v1.8-release-notes.html" class="btn btn-neutral float-right" title="v1.8 Release Notes" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="v3.0-release-notes.html" class="btn btn-neutral float-left" title="v3.0 Release Notes" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017-2023, Ohio Supercomputer Center

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Documentation Versions</span>
    v: 
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Versions</dt>
      
        <dd><a href="https://OSC.github.io/ood-documentation/latest/release-notes/v2.0-release-notes.html">latest</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-2.0/release-notes/v2.0-release-notes.html">2.0</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.8/release-notes/v2.0-release-notes.html">1.8</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.7/release-notes/v2.0-release-notes.html">1.7</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.6/release-notes/v2.0-release-notes.html">1.6</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.5/release-notes/v2.0-release-notes.html">1.5</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.4/release-notes/v2.0-release-notes.html">1.4</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.3/release-notes/v2.0-release-notes.html">1.3</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.2/release-notes/v2.0-release-notes.html">1.2</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.1/release-notes/v2.0-release-notes.html">1.1</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.0/release-notes/v2.0-release-notes.html">1.0</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/develop/release-notes/v2.0-release-notes.html">develop</a></dd>
      
    </dl>
    <dl>
      <dt>On GitHub</dt>
        <dd>
          <a href="http://openondemand.org/">Website</a>
        </dd>
        <dd>
          <a href="https://github.com/OSC/Open-OnDemand">Main Repo</a>
        </dd>
    </dl>
    <hr/>
    Theme provided by <a href="http://www.readthedocs.org">Read the Docs</a>.
  </div>
</div>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>